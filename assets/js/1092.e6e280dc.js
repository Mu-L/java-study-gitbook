(window.webpackJsonp=window.webpackJsonp||[]).push([[1092],{1467:function(t,a,e){"use strict";e.r(a);var s=e(26),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"删除-git中的错误提交的文件-md"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除-git中的错误提交的文件-md"}},[t._v("#")]),t._v(" 删除.git中的错误提交的文件.md")]),t._v(" "),e("h2",{attrs:{id:"_1-背景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-背景"}},[t._v("#")]),t._v(" 1. 背景")]),t._v(" "),e("p",[t._v("Git 操作时，经常“不小心”上传一些不必要的（大）文件，或者私密数据，等等。")]),t._v(" "),e("p",[t._v("当然可以从本地把这些文件删除，加入 "),e("code",[t._v(".gitignore")]),t._v(", 避免下次再上传。")]),t._v(" "),e("p",[t._v("然而，"),e("strong",[t._v("之前已经上传过的，还遗留在 git 历史中")])]),t._v(" "),e("h2",{attrs:{id:"_2-实例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-实例"}},[t._v("#")]),t._v(" 2. 实例")]),t._v(" "),e("p",[t._v("如下是一个我误将vue 的第三方依赖node_modules 添加到git 导致.git文件过大")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20201010094508032.png",alt:""}})]),t._v(" "),e("h2",{attrs:{id:"_3-操作步骤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-操作步骤"}},[t._v("#")]),t._v(" 3. 操作步骤")]),t._v(" "),e("ol",[e("li",[e("p",[e("a",{attrs:{href:"https://rtyley.github.io/bfg-repo-cleaner/",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载bfg.jar"),e("OutboundLink")],1),t._v(", 直接将其复制到 "),e("code",[t._v("your-repo.git")]),t._v(" 目录下")])]),t._v(" "),e("li",[e("p",[t._v("删除.git 中的文件或者文件夹")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("删除文件")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("java -jar bfg-1.12.16.jar --delete-files test1.py\n")])])])]),t._v(" "),e("li",[e("p",[t._v("删除文件夹")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("java -jar bfg-1.12.16.jar --delete-folders "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{folderA,folderB,folderC}"')]),t._v("\n")])])])])])]),t._v(" "),e("li",[e("p",[t._v("执行如下 git 命令")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reflog expire --expire"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("now --all "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" gc --prune"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("now --aggressive\n")])])]),e("p",[t._v("此时查看.git 文件夹，就可以看到文件变小了")])])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20201010093714396.png",alt:""}})]),t._v(" "),e("h2",{attrs:{id:"参考文章"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://juejin.im/post/6844904045459537934",target:"_blank",rel:"noopener noreferrer"}},[t._v("BFG Repo-Cleaner - 从 Git 历史中真正删除文件"),e("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);