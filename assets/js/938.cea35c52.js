(window.webpackJsonp=window.webpackJsonp||[]).push([[938],{1313:function(t,s,a){"use strict";a.r(s);var n=a(26),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"tomcat安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tomcat安装"}},[t._v("#")]),t._v(" Tomcat安装")]),t._v(" "),a("h2",{attrs:{id:"_1-简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-简介"}},[t._v("#")]),t._v(" 1. 简介")]),t._v(" "),a("p",[t._v("企业使用较多的是Tomcat8")]),t._v(" "),a("h2",{attrs:{id:"_2-tomcat下载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-tomcat下载"}},[t._v("#")]),t._v(" 2. Tomcat下载")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://tomcat.apache.org/download-80.cgi",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tomcat8下载"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("Tomcat主要有三个安装版本")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("tar.gz：Linux环境下的压缩包，免安装")])]),t._v(" "),a("li",[a("p",[t._v("Windows.zip：Windows压缩包，免安装，解压即用，同时注意根据自己电脑是64位系统还是32位系统下载对应的压缩包")])]),t._v(" "),a("li",[a("p",[t._v("Windows Service Installer：Windows安装包，32位和64位版本的Windows系统都适用")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20210728212527098.png",alt:"image-20210728212527098"}})]),t._v(" "),a("h2",{attrs:{id:"_3-安装tomcat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装tomcat"}},[t._v("#")]),t._v(" 3.安装Tomcat")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("将下载好的"),a("code",[t._v("apache-tomcat-8.5.47.tar.gz")]),t._v("放到指定目录，我这里放到"),a("code",[t._v("/usr/local/tomcat")]),t._v("，如下图所示")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20210728212849291.png",alt:"image-20210728212849291"}})])]),t._v(" "),a("li",[a("p",[t._v("进入"),a("code",[t._v("/usr/local/tomcat")]),t._v("目录，解压Tomcat压缩包")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入/usr/local/tomcat目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/local/tomcat\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解压Tomcat压缩包")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf  apache-tomcat-8.5.69.tar.gz \n")])])])]),t._v(" "),a("li",[a("p",[t._v("启动Tomcat")]),t._v(" "),a("p",[t._v("进入Tomcat的bin目录，启动Tomcat")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入Tomcat的bin目录，启动Tomcat")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" apache-tomcat-8.5.69/bin/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动Tomcat")]),t._v("\n./startup.sh\n")])])])]),t._v(" "),a("li",[a("p",[t._v("查看Tomcat是否启动成功")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看Tomcat是否启动成功执行")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" -ef "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" tomcat\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果输出如下，说明Tomcat安装成功")]),t._v("\nroot     "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15254")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(":30 pts/1    00:00:03 /usr/local/java/jdk1.8.0_181/jre/bin/java -Djava.util.logging.config.file"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/tomcat/apache-tomcat-8.5.69/conf/log\nroot     "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15982")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13726")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(":31 pts/1    00:00:00 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" --color"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("auto tomcat\n\n")])])])]),t._v(" "),a("li",[a("p",[t._v("使用浏览器访问Tomcat")]),t._v(" "),a("p",[t._v("使用浏览器访问Tomcat，地址Linux的ip:8080，我这里的ip端口是"),a("code",[t._v("http://ip:8080/")]),t._v("，如下图说明在Linux（CentOS7）环境安装启动Tomcat成功")]),t._v(" "),a("p",[a("strong",[t._v("注意：开放8080端口或者关闭防火墙")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20210728214559556.png",alt:"image-20210728214559556"}})])])]),t._v(" "),a("p",[a("strong",[t._v("附加：开放8080端口或者关闭防火墙，如果是阿里云只能在阿里云控制台配置开放端口")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开启8080端口")]),t._v("\nfirewall-cmd --zone"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("public --add-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v("/tcp --permanent\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询端口号8080是否开启")]),t._v("\nfirewall-cmd --query-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v("/tcp\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启防火墙")]),t._v("\nfirewall-cmd --reload\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看开放端口列表")]),t._v("\nfirewall-cmd --list-port\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 命令含义")]),t._v("\n--zone "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#作用域")]),t._v("\n--add-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v("/tcp "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#添加端口，格式为：端口/通讯协议")]),t._v("\n--permanent "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#永久生效，没有此参数重启后失效")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 关闭防火墙")]),t._v("\nsystemctl stop firewalld.service "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#停止firewall")]),t._v("\nsystemctl disable firewalld.service "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#禁止firewall开机启动")]),t._v("\n")])])]),a("h2",{attrs:{id:"_4-设置tomcat为开机启动项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-设置tomcat为开机启动项"}},[t._v("#")]),t._v(" 4. 设置Tomcat为开机启动项")]),t._v(" "),a("p",[t._v("按照上面的方式启动Tomcat，如果我们的虚拟机或者服务器关闭了，重启服务器后Tomcat是关闭的，但是我们希望虚拟机或者服务器重启后，Tomcat可以自己启动，所以我们需要设置Tomcat为开机启动项")]),t._v(" "),a("p",[t._v("创建setenv.sh文件，为Tomcat添加启动参数")]),t._v(" "),a("p",[t._v("catalina.sh在执行的时候会调用同级路径下的setenv.sh来设置额外的环境变量，因此在/usr/local/tomcat/apache-tomcat-8.5.69/bin路径下创建setenv.sh文件，内容如下：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置Tomcat的PID文件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CATALINA_PID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$CATALINA_BASE")]),t._v('/tomcat.pid"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加JVM选项")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JAVA_OPTS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-server -XX:PermSize=256M -XX:MaxPermSize=1024m -Xms512M -Xmx1024M -XX:MaxNewSize=256m"')]),t._v("\n")])])]),a("p",[t._v("在"),a("code",[t._v("/usr/local/tomcat/apache-tomcat-8.5.69/bin/catalina.sh")]),t._v("文件开头添加"),a("code",[t._v("JAVA_HOME")]),t._v("和"),a("code",[t._v("JRE_HOME")]),t._v("，其中"),a("code",[t._v("/usr/local/jdk1.8.0_152")]),t._v("为jdk的安装目录")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JAVA_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/jdk1.8.0_152\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JRE_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/jdk1.8.0_152/jre\n")])])]),a("p",[t._v("如果在catalina.sh不配置JAVA_HOME和JRE_HOME就会报如下的错误")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@JourWon ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# systemctl status tomcat")]),t._v("\n● tomcat.service - Tomcat\n   Loaded: loaded "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/usr/lib/systemd/system/tomcat.service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" enabled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" vendor preset: disabled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   Active: failed "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Result: exit-code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" since Mon "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("-10-21 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":54:54 CST"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" 6s ago\n  Process: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8746")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ExecStart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/tomcat/apache-tomcat-8.5.47/bin/startup.sh "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("exited, "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("status")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/FAILURE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":54:54 JourWon systemd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Starting Tomcat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":54:54 JourWon startup.sh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8746")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Neither the JAVA_HOME nor the JRE_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".d\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":54:54 JourWon startup.sh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8746")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": At least one of these environment "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".m\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":54:54 JourWon systemd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": tomcat.service: control process exited,"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":54:54 JourWon systemd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Failed to start Tomcat.\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":54:54 JourWon systemd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Unit tomcat.service entered failed state.\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":54:54 JourWon systemd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": tomcat.service failed.\nHint: Some lines were ellipsized, use -l to show "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" full.\n")])])]),a("p",[t._v("在/usr/lib/systemd/system路径下添加tomcat.service文件，内容如下：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Unit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Description")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Tomcat\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("After")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("network.target remote-fs.target nss-lookup.target\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("forking\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("TimeoutSec")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PIDFile")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/tomcat/apache-tomcat-8.5.47/tomcat.pid\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ExecStart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/tomcat/apache-tomcat-8.5.47/bin/startup.sh\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ExecReload")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/bin/kill -s HUP "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$MAINPID")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ExecStop")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/bin/kill -s QUIT "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$MAINPID")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PrivateTmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Install"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("WantedBy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("multi-user.target\n")])])]),a("p",[t._v("此外service文件修改后需要调用"),a("code",[t._v("systemctl daemon-reload")]),t._v("命令重新加载。")]),t._v(" "),a("p",[t._v("配置"),a("code",[t._v("TimeoutSec=0")]),t._v("的目的是让开机启动不处理tomcat启动超时，保证tomcat耗时过长时不会被系统terminating，如果不配置可能出现下面的情况")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(":26:37 JourWon startup.sh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1634")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Existing PID "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" found during start.\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(":26:37 JourWon startup.sh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1634")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Removing/clearing stale PID file.\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(":26:37 JourWon startup.sh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1634")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Tomcat started.\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(":26:37 JourWon systemd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": PID "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" /usr/local/tomcat/apache-tomcat-8.5.47/tomcat.pid not readable "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("yet?"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" after start.\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(":26:38 JourWon polkitd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("464")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Unregistered Authentication Agent "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" unix-process:1628:19013 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("system bus name :1.23, object path /org/freedesktop/PolicyKit1/AuthenticationAgent, loca\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(":28:07 JourWon systemd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": tomcat.service start operation timed out. Terminating.\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(":28:07 JourWon systemd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Failed to start Tomcat.\n\n")])])]),a("p",[t._v("把Tomcat加入开机自启动")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" tomcat.service\n")])])]),a("p",[t._v("重启服务器")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reboot")]),t._v("\n")])])]),a("p",[t._v("再次连接后，查看服务状态")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("systemctl status tomcat\n● tomcat.service - Tomcat\n   Loaded: loaded "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/usr/lib/systemd/system/tomcat.service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" enabled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" vendor preset: disabled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   Active: activating "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" since Mon "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("-10-21 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(":12:19 CST"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" 8s ago\n  Process: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9244")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ExecStart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/tomcat/apache-tomcat-8.5.47/bin/startup.sh "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("exited, "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("status")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("/SUCCESS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   CGroup: /system.slice/tomcat.service\n           └─9255 /usr/local/jdk1.8.0_152/jre/bin/java -Djava.util.logging.config.file"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/tomcat/apache-tomcat-8.5.47/conf/logging.properties -Djava.util.logging.manager"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("org.apac"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(":12:19 JourWon systemd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Starting Tomcat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(":12:19 JourWon startup.sh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9244")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Existing PID "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" found during start.\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(":12:19 JourWon startup.sh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9244")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Removing/clearing stale PID file.\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(":12:19 JourWon startup.sh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9244")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Tomcat started.\nOct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(":12:19 JourWon systemd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": PID "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" /usr/local/tomcat/apache-tomcat-8.5.47/tomcat.pid not readable "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("yet?"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" after start.\n")])])]),a("p",[t._v("查看开机启动列表命令")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("systemctl list-unit-files "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" enabled\n")])])]),a("p",[t._v("查看Tomcat是否设置为开机启动项，如果显示为enabled，说明设置成功")]),t._v(" "),a("p",[t._v("参数说明")]),t._v(" "),a("ul",[a("li",[t._v("static：表示该服务与其他服务相关联,不能单独设置该服务的启动状态")]),t._v(" "),a("li",[t._v("disabled：表示禁止开机启动")]),t._v(" "),a("li",[t._v("enabled：表示允许开机启动")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("systemctl list-unit-files "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" tomcat\ntomcat.service                                enabled\n")])])]),a("h2",{attrs:{id:"参考文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://thinkwon.blog.csdn.net/article/details/102717537",target:"_blank",rel:"noopener noreferrer"}},[t._v("Linux(CentOS7)安装Tomcat与设置Tomcat为开机启动项"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);