(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{480:function(a,t,s){"use strict";s.r(t);var e=s(26),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"清除挖矿程序-docker中ubuntu容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#清除挖矿程序-docker中ubuntu容器"}},[a._v("#")]),a._v(" 清除挖矿程序（docker中Ubuntu容器）")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20200202232351270.png",alt:"image-20200202232351270"}})]),a._v(" "),s("p",[a._v("我们可以看到kdevtmpfsi 这个进程CPU一直很高，100%了，接下来我们就开启排查")]),a._v(" "),s("h2",{attrs:{id:"_2-查看是否有定时任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-查看是否有定时任务"}},[a._v("#")]),a._v(" 2. 查看是否有定时任务")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("crontab -l\n")])])]),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20200202232702861.png",alt:"image-20200202232702861"}})]),a._v(" "),s("p",[a._v("竟然没有定时任务")]),a._v(" "),s("h2",{attrs:{id:"_3-关闭进程并查看相关文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-关闭进程并查看相关文件"}},[a._v("#")]),a._v(" 3. 关闭进程并查看相关文件")]),a._v(" "),s("p",[a._v("我们使用kill pid 来关闭进程, 关闭进程之后cpu 是降下来了，我们查找本地是否有相关文件")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("find / -name kdevtmpfsi\n")])])]),s("p",[a._v("我们可以看到这里竟然有docker")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20200202233209635.png",alt:"image-20200202233209635"}})]),a._v(" "),s("h2",{attrs:{id:"_4-查看docker-相关进程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-查看docker-相关进程"}},[a._v("#")]),a._v(" 4. 查看docker 相关进程")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20200202233406083.png",alt:"image-20200202233406083"}})]),a._v(" "),s("p",[a._v("就是这个ubutu死活杀不掉，哪怕你把容器和镜像都删除了，他也会自动重启，然后他在Ubuntu里面启动kdevtmpfsi")]),a._v(" "),s("h2",{attrs:{id:"_5-查看docker-详情"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-查看docker-详情"}},[a._v("#")]),a._v(" 5. 查看docker 详情")]),a._v(" "),s("p",[a._v("通过 docker inspect CONTAINER_ID查看容器详情")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker inspect 7110557eb73a\n")])])]),s("p",[a._v("我们看到这里有个定时")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20200202234527883.png",alt:"image-20200202234527883"}})]),a._v(" "),s("h2",{attrs:{id:"_6-进入ubuntu容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-进入ubuntu容器"}},[a._v("#")]),a._v(" 6. 进入Ubuntu容器")]),a._v(" "),s("p",[a._v("我们进入Ubuntu容器")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v(" docker exec -ti 7110557eb73a /bin/bash\n")])])]),s("p",[a._v("查看ubuntu里的定时任务")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("crontab -l\n")])])]),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20200202235031202.png",alt:"image-20200202235031202"}})]),a._v(" "),s("h2",{attrs:{id:"_7-删除定时任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-删除定时任务"}},[a._v("#")]),a._v(" 7. 删除定时任务")]),a._v(" "),s("p",[a._v("执行 crontab -r")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("crontab -l  # 表示列出所有的定时任务\ncrontab -r  # 表示删除用户的定时任务，当执行此命令后，所有用户下面的定时任务会被删除，执行crontab -l后会提示用户：“no crontab for admin”12\n")])])]),s("h2",{attrs:{id:"_8-关闭docker-默认端口2375"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-关闭docker-默认端口2375"}},[a._v("#")]),a._v(" 8. 关闭docker 默认端口2375")]),a._v(" "),s("p",[a._v("这次被挖矿主要是因为阿里云开放了 docker 默认端口2375给远程访问，这才导致不法分子有可乘之机，阿里云关闭2375")])])}),[],!1,null,null,null);t.default=r.exports}}]);