(window.webpackJsonp=window.webpackJsonp||[]).push([[921],{1299:function(s,a,t){"use strict";t.r(a);var e=t(26),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"maven私服-nexus部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#maven私服-nexus部署"}},[s._v("#")]),s._v(" Maven私服 Nexus部署")]),s._v(" "),t("h2",{attrs:{id:"_1-简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-简介"}},[s._v("#")]),s._v(" 1. 简介")]),s._v(" "),t("p",[s._v("私服是指私有服务器，是架设在局域网的一种特殊的远程仓库，目的是代理远程仓库及部署第三方构建。有了私服之后，当 Maven 需要下载构件时，直接请求私服，私服上存在则下载到本地仓库；否则，私服请求外部的远程仓库，将构件下载到私服，再提供给本地仓库下载")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004204944689.png",alt:"image-20211004204944689"}})]),s._v(" "),t("h2",{attrs:{id:"_2-安装步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装步骤"}},[s._v("#")]),s._v(" 2. 安装步骤")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("下载")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://help.sonatype.com/repomanager3/download",target:"_blank",rel:"noopener noreferrer"}},[s._v("Nexus官方3.X下载地址"),t("OutboundLink")],1)])]),s._v(" "),t("li",[t("p",[s._v("部署步骤")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /usr/local/nexus\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxf nexus-3.34.1-01-unix.tar.gz -C /usr/local/nexus/\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动nexus必须使用nexus用户，不可以使用权限过高的用户，比如root，否则会启动失败")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" nexus\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R nexus:nexus /usr/local/nexus/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" /usr/local/nexus/\nnexus-3.34.1-01     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这是应用目录")]),s._v("\nsonatype-work         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这是工作目录，存放镜像仓库")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#运行内存和工作目录nexus-3.34.1-01/bin/nexus.vmoptions （修改对应字段即可）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#运行监听地址和端口nexus-3.34.1-01/etc/nexus-default.properties")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/local/nexus/nexus-3.34.1-01/bin/nexus /usr/local/bin/\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建命令软连接")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#切换至nexus用户，并启动nexus服务，如果使用root用户，会因为权限过高而启动失败")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" nexus\nnexus start\n")])])])]),s._v(" "),t("li",[t("p",[s._v("运行检查")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("netstat "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("anput "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" grep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("访问测试")]),s._v(" "),t("p",[s._v("启动nexus后，即可访问服务器IP+8081端口：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004211202373.png",alt:"image-20211004211202373"}})])])]),s._v(" "),t("h2",{attrs:{id:"_3-登录并修改密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-登录并修改密码"}},[s._v("#")]),s._v(" 3. 登录并修改密码")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("查看密码")]),s._v(" "),t("p",[s._v("根据下述提示的路径，查看密码：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004211352564.png",alt:"image-20211004211352564"}})]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cat /usr/local/nexus/sonatype-work/nexus3/admin.password \n02fc969a-cc65-44a8-ad56-9d22b243de1e\n")])])])]),s._v(" "),t("li",[t("p",[s._v("进行登录，"),t("strong",[s._v("默认的用户名为admin，密码就是我们上面查看到的：")])])]),s._v(" "),t("li",[t("p",[s._v("登录后,修改密码")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004211715907.png",alt:"image-20211004211715907"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004211756213.png",alt:"image-20211004211756213"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004211840651.png",alt:"image-20211004211840651"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004211852121.png",alt:"image-20211004211852121"}})])])]),s._v(" "),t("h2",{attrs:{id:"_4-创建角色"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-创建角色"}},[s._v("#")]),s._v(" 4. "),t("strong",[s._v("创建角色")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004212042299.png",alt:"image-20211004212042299"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004212207094.png",alt:"image-20211004212207094"}})]),s._v(" "),t("p",[t("strong",[s._v("点击创建：")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004212246300.png",alt:"image-20211004212246300"}})]),s._v(" "),t("h2",{attrs:{id:"_5-创建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-创建用户"}},[s._v("#")]),s._v(" 5. "),t("strong",[s._v("创建用户")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004212426719.png",alt:"image-20211004212426719"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004212558422.png",alt:"image-20211004212558422"}})]),s._v(" "),t("h2",{attrs:{id:"_6-查看默认仓库类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-查看默认仓库类型"}},[s._v("#")]),s._v(" 6. "),t("strong",[s._v("查看默认仓库类型")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004212722827.png",alt:"image-20211004212722827"}})]),s._v(" "),t("ul",[t("li",[s._v("group（仓库组类型）：又叫组仓库，用于方便开发人员，自己设定的仓库")]),s._v(" "),t("li",[s._v("hosted（宿主类型）：内部项目的发布仓库（内部开发人员发布上去存放的仓库）")]),s._v(" "),t("li",[s._v("proxy（代理类型）：从远程中央仓库中寻找数据的仓库（可以点击对应的仓库的Configuration页签下Remote Storage Location属性的值，即被代理的远程仓库的路径）")]),s._v(" "),t("li",[s._v("virtual（虚拟类型）：虚拟仓库（这个基本上用不到）")]),s._v(" "),t("li",[s._v("Public Repositories下的仓库类型")]),s._v(" "),t("li",[t("strong",[s._v("3rd party: 无法从公共仓库获得的第三方发布版本的构件仓库，即第三方依赖的仓库，这个数据通常是由内部人员自行下载之后发布上去；")])]),s._v(" "),t("li",[s._v("Apache Snapshots: 用了代理ApacheMaven仓库快照版本的构件仓库")]),s._v(" "),t("li",[s._v("Central: 用来代理maven中央仓库中发布版本构件的仓库")]),s._v(" "),t("li",[s._v("entral M1 shadow: 用于提供中央仓库中M1格式的发布版本的构件镜像仓库")]),s._v(" "),t("li",[s._v("Codehaus Snapshots: 用来代理CodehausMaven 仓库的快照版本构件的仓库")]),s._v(" "),t("li",[t("strong",[s._v("Releases: 内部的模块中release模块的发布仓库，用来部署管理内部的发布版本构件的宿主类型仓库；release是发布版本；")])]),s._v(" "),t("li",[t("strong",[s._v("Snapshots:发布内部的SNAPSHOT模块的仓库，用来部署管理内部的快照版本构件的宿主类型仓库；snapshots是快照版本，也就是不稳定版本")])])]),s._v(" "),t("h2",{attrs:{id:"_7-开启release的重复发版权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-开启release的重复发版权限"}},[s._v("#")]),s._v(" 7. "),t("strong",[s._v("开启release的重复发版权限")])]),s._v(" "),t("p",[s._v("开发中需要重复发版，则需要开启release类型仓库的对应权限设置allow redeploy。如下:")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004213118075.png",alt:"image-20211004213118075"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004213230425.png",alt:"image-20211004213230425"}})]),s._v(" "),t("h2",{attrs:{id:"_8-设置代理仓库-阿里云maven仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-设置代理仓库-阿里云maven仓库"}},[s._v("#")]),s._v(" 8. "),t("strong",[s._v("设置代理仓库（阿里云maven仓库）")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004213337597.png",alt:"image-20211004213337597"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004213415866.png",alt:"image-20211004213415866"}})]),s._v(" "),t("p",[s._v("阿里云仓库的URL：https://maven.aliyun.com/nexus/content/groups/public/")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004213621568.png",alt:"image-20211004213621568"}})]),s._v(" "),t("p",[s._v("填写上述两个内容后，点击页面下边的create repository 创建完成之后可以看到新增加了阿里云库。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004213707656.png",alt:"image-20211004213707656"}})]),s._v(" "),t("p",[s._v("将添加的阿里云Proxy加入默认group中：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004213813431.png",alt:"image-20211004213813431"}})]),s._v(" "),t("p",[s._v("将阿里云移动到第一个")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004213918176.png",alt:"image-20211004213918176"}})]),s._v(" "),t("p",[s._v("保存后，再次刷新页面，即可看到当前的Nexus地址：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20211004214034153.png",alt:"image-20211004214034153"}})]),s._v(" "),t("h3",{attrs:{id:"_8-1-关于上述配置的常见使用场景介绍如下"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-关于上述配置的常见使用场景介绍如下"}},[s._v("#")]),s._v(" 8.1 关于上述配置的常见使用场景介绍如下：")]),s._v(" "),t("ul",[t("li",[s._v("release发版仓库（nexus默认已建立：maven-releasees）")]),s._v(" "),t("li",[s._v("snapshot 测试中心快照仓库（nexus默认已建立：maven-snapshots）")]),s._v(" "),t("li",[s._v("central 中央仓库 （nexus默认已建立：maven-central）")]),s._v(" "),t("li",[s._v("关于组：在nexus中可以建立组，将不同类型仓库集合在一起（nexus默认已建立：maven-public）")]),s._v(" "),t("li",[s._v("场景一： 自定义新建proxy类型仓库，在maven配置中分别配置不同调用地址，或是将自定义新建的proxy仓库统一加入一个组，在maven配置中调用一个地址")]),s._v(" "),t("li",[s._v("场景二： 使用maven已经建立好的proxy仓库，且使用已建立好的组（maven-public）配置maven调用地址")]),s._v(" "),t("li",[s._v("场景一和场景二本质上讲没有什么变化，根据公司开发习惯和需求进行配置即可")])]),s._v(" "),t("h2",{attrs:{id:"参考文章"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[s._v("#")]),s._v(" 参考文章")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1623922",target:"_blank",rel:"noopener noreferrer"}},[s._v("部署maven及Nexus私服"),t("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);