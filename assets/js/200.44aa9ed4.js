(window.webpackJsonp=window.webpackJsonp||[]).push([[200],{576:function(t,s,a){"use strict";a.r(s);var n=a(26),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"mongodb插入操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb插入操作"}},[t._v("#")]),t._v(" MongoDB插入操作")]),t._v(" "),a("h2",{attrs:{id:"_1-简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-简介"}},[t._v("#")]),t._v(" 1. 简介")]),t._v(" "),a("p",[a("strong",[t._v("MongoDB 提供了以下方法将文件插入集合")]),t._v("：")]),t._v(" "),a("p",[t._v("可以使用 MongoDB 的 insert() 方法，同时 MongoDB 针对插入一条还是多条数据，提供了更可靠的 insertOne() 和 insertMany() 方法。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("方法")]),t._v(" "),a("th",[t._v("作用")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("db.collection.insert()")]),t._v(" "),a("td",[t._v("将单个文档或多个文档插入到集合中。")]),t._v(" "),a("td",[t._v("官方不推荐，但是好用呀T_T")])]),t._v(" "),a("tr",[a("td",[t._v("db.collection.insertOne()")]),t._v(" "),a("td",[t._v("将单个文档插入到集合中")]),t._v(" "),a("td",[t._v("3.2版本后新增")])]),t._v(" "),a("tr",[a("td",[t._v("db.collection.insertMany()")]),t._v(" "),a("td",[t._v("将多个文档插入集合中。")]),t._v(" "),a("td",[t._v("3.2版本后新增")])]),t._v(" "),a("tr",[a("td",[t._v("db.collection.save()")]),t._v(" "),a("td",[t._v("插入")]),t._v(" "),a("td",[t._v("更早的语法，不推荐")])])])]),t._v(" "),a("h3",{attrs:{id:"_1-1-插入特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-插入特性"}},[t._v("#")]),t._v(" 1.1 插入特性")]),t._v(" "),a("ol",[a("li",[t._v("MongoDB 向集合里插入记录时，无须事先对数据存储结构进行定义。如果待插入的集合不存在，则插入操作会默认创建集合。")]),t._v(" "),a("li",[t._v("在 MongoDB 中，插入操作以单个集合为目标，MongoDB 中的所有写入操作都是单个文档级别的原子操作。")])]),t._v(" "),a("h2",{attrs:{id:"_2-插入方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-插入方法"}},[t._v("#")]),t._v(" 2. 插入方法")]),t._v(" "),a("h3",{attrs:{id:"_2-1-insert"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-insert"}},[t._v("#")]),t._v(" 2.1 insert()")]),t._v(" "),a("p",[t._v("插入单个或多个")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("db.collection.insert(\n   <document or array of documents>,\n   {\n     writeConcern: <document>,\n     ordered: <boolean>\n   }\n)\n")])])]),a("p",[t._v("参数说明：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("document：要写入的文档或文档数组。")])]),t._v(" "),a("li",[a("p",[t._v("writeConcern：写入策略，默认为 1，即要求确认写操作，0 是不要求。")])]),t._v(" "),a("li",[a("p",[t._v("ordered（可选，默认为true）：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("如果为true，则对数组中的文档执行有序插入，如果其中一个文档发生错误，则MongoDB将返回，而不处理数组中的其余文档。")])]),t._v(" "),a("li",[a("p",[t._v("如果为false，则执行无序插入，如果其中一个文档发生错误，则继续处理数组中的其余文档。")])])])])]),t._v(" "),a("h4",{attrs:{id:"_2-2-1-示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-示例"}},[t._v("#")]),t._v(" 2.2.1 示例")]),t._v(" "),a("p",[t._v("插入不指定 _id 字段的文档的代码如下：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('db.products.insert( { item: "card", qty: 15 } )\n')])])]),a("p",[t._v("在插入过程中，mongod将创建 _id字段并为其分配一个唯一的ObjectId() 值，由插入的文档验证:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{ "_id" : ObjectId("5063114bd386d8fadbd6b004"), "item" : "card", "qty" : 15 }\n')])])]),a("p",[t._v("也可以指定id")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('db.products.insert( { _id: 10, item: "box", qty: 20 } )\n')])])]),a("h3",{attrs:{id:"_2-2-insertone"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-insertone"}},[t._v("#")]),t._v(" 2.2 insertOne()")]),t._v(" "),a("p",[t._v("插入单个文档")]),t._v(" "),a("p",[a("code",[t._v("db.collection.insertOne()")]),t._v("将单个 "),a("code",[t._v("文档")]),t._v(" 插入集合中。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("db.collection.insertOne(\n   <document>,\n   {\n      writeConcern: <document>\n   }\n)\n")])])]),a("p",[t._v("参数说明：")]),t._v(" "),a("ul",[a("li",[t._v("document：要写入的文档。")]),t._v(" "),a("li",[t._v("writeConcern：写入策略，默认为 1，即要求确认写操作，0 是不要求。")])]),t._v(" "),a("h4",{attrs:{id:"_2-2-1-示例-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-示例-2"}},[t._v("#")]),t._v(" 2.2.1 示例")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("inventory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertOne")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("  \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"canvas"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" qty"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tags"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cotton"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" size"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" h"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("28")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" w"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("35.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uom"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cm"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("code",[t._v("insertOne()")]),t._v("返回一个"),a("strong",[t._v("文档，其中包含新插入的文档的_id字段值")])]),t._v(" "),a("blockquote",[a("p",[t._v("注：没指定_id字段，则MongoDB将具有ObjectId值的_id字段添加到新文档中")])]),t._v(" "),a("h3",{attrs:{id:"_2-3-insertmany"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-insertmany"}},[t._v("#")]),t._v(" 2.3 insertMany()")]),t._v(" "),a("p",[t._v("插入多个文件")]),t._v(" "),a("p",[a("code",[t._v("db.collection.insertMany()")]),t._v("可以将多个文档插入一个集合中。 将文档数组传递给该方法。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("db.collection.insertMany(\n   [ <document 1> , <document 2>, ... ],\n   {\n      writeConcern: <document>,\n      ordered: <boolean>\n   }\n)\n")])])]),a("p",[t._v("参数说明：")]),t._v(" "),a("ul",[a("li",[t._v("document：要写入的文档。")]),t._v(" "),a("li",[t._v("writeConcern：写入策略，默认为 1，即要求确认写操作，0 是不要求。")]),t._v(" "),a("li",[t._v("ordered：指定是否按顺序写入，默认 true，按顺序写入。")])]),t._v(" "),a("h4",{attrs:{id:"_2-3-1示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1示例"}},[t._v("#")]),t._v(" 2.3.1示例")]),t._v(" "),a("p",[t._v("下面的示例将三个新文档插入库存集合。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("inventory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertMany")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"journal"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" qty"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tags"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blank"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"red"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" size"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" h"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" w"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uom"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cm"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mat"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" qty"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("85")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tags"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gray"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" size"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" h"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27.9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" w"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("35.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uom"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cm"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mousepad"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" qty"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tags"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gel"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" size"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" h"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" w"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22.85")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uom"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cm"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("返回包含新插入的文档**_id**字段值的文档。")]),t._v(" "),a("h2",{attrs:{id:"参考文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://docs.mongoing.com/mongodb-crud-operations/insert-documents",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[t._v("插入文档")]),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);