(window.webpackJsonp=window.webpackJsonp||[]).push([[216],{594:function(e,t,a){"use strict";a.r(t);var s=a(26),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"从sql到mongodb之概念篇"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从sql到mongodb之概念篇"}},[e._v("#")]),e._v(" 从SQL到MongoDB之概念篇")]),e._v(" "),a("h2",{attrs:{id:"_1-概念对应关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-概念对应关系"}},[e._v("#")]),e._v(" 1. 概念对应关系")]),e._v(" "),a("p",[e._v("SQL 术语和概念以及相应的 MongoDB 术语和概念.")]),e._v(" "),a("p",[e._v("下表介绍了各种 SQL 术语和概念以及相应的 MongoDB 术语和概念.")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("SQL术语/概念")]),e._v(" "),a("th",[e._v("MongoDB 术语/概念")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("database")]),e._v(" "),a("td",[a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/glossary/#term-database",target:"_blank",rel:"noopener noreferrer"}},[e._v("database"),a("OutboundLink")],1)])]),e._v(" "),a("tr",[a("td",[e._v("table")]),e._v(" "),a("td",[a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/glossary/#term-collection",target:"_blank",rel:"noopener noreferrer"}},[e._v("collection"),a("OutboundLink")],1)])]),e._v(" "),a("tr",[a("td",[e._v("row")]),e._v(" "),a("td",[a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/glossary/#term-document",target:"_blank",rel:"noopener noreferrer"}},[e._v("document "),a("OutboundLink")],1),e._v("或 "),a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/glossary/#term-bson",target:"_blank",rel:"noopener noreferrer"}},[e._v("BSON "),a("OutboundLink")],1),e._v("document")])]),e._v(" "),a("tr",[a("td",[e._v("column")]),e._v(" "),a("td",[a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/glossary/#term-field",target:"_blank",rel:"noopener noreferrer"}},[e._v("field"),a("OutboundLink")],1)])]),e._v(" "),a("tr",[a("td",[e._v("index")]),e._v(" "),a("td",[a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/glossary/#term-index",target:"_blank",rel:"noopener noreferrer"}},[e._v("index"),a("OutboundLink")],1)])]),e._v(" "),a("tr",[a("td",[e._v("table joins （表联接）")]),e._v(" "),a("td",[a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/#pipe._S_lookup",target:"_blank",rel:"noopener noreferrer"}},[e._v("$lookup "),a("OutboundLink")],1),e._v(", "),a("code",[e._v("embedded documents （嵌入式文档）")])])]),e._v(" "),a("tr",[a("td",[e._v("primary key 指定任何唯一的列或者列组合作为主键")]),e._v(" "),a("td",[a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/glossary/#term-primary-key",target:"_blank",rel:"noopener noreferrer"}},[e._v("primary key "),a("OutboundLink")],1),e._v("在 MongoDB 中, 主键自动设置为 "),a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/glossary/#term-id",target:"_blank",rel:"noopener noreferrer"}},[e._v("_id "),a("OutboundLink")],1),e._v("字段")])]),e._v(" "),a("tr",[a("td",[e._v("aggregation (如：group by)")]),e._v(" "),a("td",[a("code",[e._v("aggregation pipeline （聚合管道）")]),e._v("参考： "),a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/sql-aggregation-comparison/",target:"_blank",rel:"noopener noreferrer"}},[e._v("SQL to Aggregation Mapping Chart"),a("OutboundLink")],1)])]),e._v(" "),a("tr",[a("td",[e._v("SELECT INTO NEW_TABLE")]),e._v(" "),a("td",[a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/operator/aggregation/out/#pipe._S_out",target:"_blank",rel:"noopener noreferrer"}},[e._v("$out "),a("OutboundLink")],1),e._v("参考： "),a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/sql-aggregation-comparison/",target:"_blank",rel:"noopener noreferrer"}},[e._v("SQL to Aggregation Mapping Chart"),a("OutboundLink")],1)])]),e._v(" "),a("tr",[a("td",[e._v("MERGE INTO TABLE")]),e._v(" "),a("td",[a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/operator/aggregation/merge/#pipe._S_merge",target:"_blank",rel:"noopener noreferrer"}},[e._v("$merge "),a("OutboundLink")],1),e._v("（从MongoDB 4.2开始可用） 参考： "),a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/sql-aggregation-comparison/",target:"_blank",rel:"noopener noreferrer"}},[e._v("SQL to Aggregation Mapping Chart"),a("OutboundLink")],1)])]),e._v(" "),a("tr",[a("td",[e._v("transactions")]),e._v(" "),a("td",[a("a",{attrs:{href:"https://docs.mongodb.com/manual/core/transactions/",target:"_blank",rel:"noopener noreferrer"}},[e._v("transactions"),a("OutboundLink")],1)])])])]),e._v(" "),a("blockquote",[a("p",[e._v("TIP")]),e._v(" "),a("p",[a("em",[e._v("在许多情况下，")]),e._v(" "),a("code",[e._v("非规范化数据模型（嵌入式文档和数组） denormalized data model (embedded documents and arrays)")]),e._v(" "),a("em",[e._v("将继续是您数据和用例的最佳选择，而不是多文档事务. 也就是说，对于许多场景，对数据进行适当的建模将最大限度地减少对")]),e._v(" "),a("code",[e._v("多文档事务（multi-document transactions）")]),a("em",[e._v("的需求。")])])]),e._v(" "),a("h2",{attrs:{id:"_2-可执行文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-可执行文件"}},[e._v("#")]),e._v(" 2. 可执行文件")]),e._v(" "),a("p",[e._v("下表显示了一些数据库可执行文件和相应的 MongoDB 可执行文件。 这张表并不是详尽无遗的。")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th"),e._v(" "),a("th",[e._v("MongoDB")]),e._v(" "),a("th",[e._v("MySQL")]),e._v(" "),a("th",[e._v("Oracle")]),e._v(" "),a("th",[e._v("Informix")]),e._v(" "),a("th",[e._v("DB2")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Database Server")]),e._v(" "),a("td",[e._v("mongod")]),e._v(" "),a("td",[e._v("mysqld")]),e._v(" "),a("td",[e._v("oracle")]),e._v(" "),a("td",[e._v("IDS")]),e._v(" "),a("td",[e._v("DB2 Server")])]),e._v(" "),a("tr",[a("td",[e._v("Database Client")]),e._v(" "),a("td",[e._v("mongo")]),e._v(" "),a("td",[e._v("mysql")]),e._v(" "),a("td",[e._v("sqlplus")]),e._v(" "),a("td",[e._v("DB-Access")]),e._v(" "),a("td",[e._v("DB2 Client")])])])]),e._v(" "),a("h2",{attrs:{id:"_3-示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-示例"}},[e._v("#")]),e._v(" 3. 示例")]),e._v(" "),a("p",[e._v("下表显示了各种 SQL 语句和相应的 MongoDB 语句。 表中的例子假定以下条件:")]),e._v(" "),a("ul",[a("li",[e._v("Sql 示例假设一个名为 people 的表。")]),e._v(" "),a("li",[e._v("MongoDB 的示例假定一个名为 people 的集合包含以下原型的文档：")])]),e._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  _id"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("ObjectId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"509a8fb2f3f4948bd2f983a0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  user_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"abc123"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  age"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("55")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  status"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'A'")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("h3",{attrs:{id:"_3-1-create-and-alter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-create-and-alter"}},[e._v("#")]),e._v(" 3.1 Create and Alter")]),e._v(" "),a("h4",{attrs:{id:"_3-1-1-create-table"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-create-table"}},[e._v("#")]),e._v(" 3.1.1 CREATE TABLE")]),e._v(" "),a("ul",[a("li",[e._v("SQL 模式语句：")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("CREATE TABLE people (\n    id MEDIUMINT NOT NULL\n        AUTO_INCREMENT,\n    user_id Varchar(30),\n    age Number,\n    status char(1),\n    PRIMARY KEY (id)\n)\n")])])]),a("ul",[a("li",[e._v("MongoDB 模式语句：")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('db.people.insertOne( {\n    user_id: "abc123",\n    age: 55,\n    status: "A"\n } )\n')])])]),a("h4",{attrs:{id:"_3-1-2-alter-table-add"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-2-alter-table-add"}},[e._v("#")]),e._v(" 3.1.2 ALTER TABLE / ADD")]),e._v(" "),a("ul",[a("li",[e._v("SQL模式语句：")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ALTER TABLE people\nADD join_date DATETIME\n")])])]),a("ul",[a("li",[e._v("MongoDB 模式语句：")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.people.updateMany(\n    { },\n    { $set: { join_date: new Date() } }\n)\n")])])]),a("p",[e._v("集合不描述或强制执行其文档的结构；也就是说，在集合级别上没有结构上的改变。")]),e._v(" "),a("p",[e._v("但是，在文档级别， "),a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/method/db.collection.updateMany/#db.collection.updateMany",target:"_blank",rel:"noopener noreferrer"}},[e._v("updateMany() "),a("OutboundLink")],1),e._v("操作可以使用 "),a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/operator/update/set/#up._S_set",target:"_blank",rel:"noopener noreferrer"}},[e._v("$set "),a("OutboundLink")],1),e._v("操作符向现有文档添加字段。")]),e._v(" "),a("h4",{attrs:{id:"_3-1-3-alter-table-drop-column"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-3-alter-table-drop-column"}},[e._v("#")]),e._v(" 3.1.3 ALTER TABLE / DROP COLUMN")]),e._v(" "),a("ul",[a("li",[e._v("SQL模式语句：")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ALTER TABLE people\nDROP COLUMN join_date\n")])])]),a("ul",[a("li",[e._v("MongoDB 模式语句：")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('db.people.updateMany(\n    { },\n    { $unset: { "join_date": "" } }\n)\n')])])]),a("p",[e._v("集合不描述或强制执行其文档的结构；也就是说，在集合级别上没有结构上的改变。")]),e._v(" "),a("p",[e._v("但是，在文档级别， "),a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/method/db.collection.updateMany/#db.collection.updateMany",target:"_blank",rel:"noopener noreferrer"}},[e._v("updateMany() "),a("OutboundLink")],1),e._v("操作可以使用 "),a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/operator/update/unset/#up._S_unset",target:"_blank",rel:"noopener noreferrer"}},[e._v("$unset "),a("OutboundLink")],1),e._v("操作符从文档中删除字段。")]),e._v(" "),a("h4",{attrs:{id:"_3-1-4-create-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-4-create-index"}},[e._v("#")]),e._v(" 3.1.4 CREATE INDEX")]),e._v(" "),a("ul",[a("li",[e._v("SQL 模式语句：")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("CREATE INDEX idx_user_id_asc\nON people(user_id)\n")])])]),a("ul",[a("li",[e._v("MongoDB 模式语句：")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.people.createIndex( { user_id: 1 } )\n")])])]),a("h4",{attrs:{id:"_3-1-5-create-index-multi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-5-create-index-multi"}},[e._v("#")]),e._v(" 3.1.5 CREATE INDEX / Multi")]),e._v(" "),a("ul",[a("li",[e._v("SQL模式语句：")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("CREATE INDEX\n       idx_user_id_asc_age_desc\nON people(user_id, age DESC)\n")])])]),a("ul",[a("li",[e._v("MongoDB 模式语句：")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.people.createIndex( { user_id: 1, age: -1 } )\n")])])]),a("h4",{attrs:{id:"_3-1-6-drop-table"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-6-drop-table"}},[e._v("#")]),e._v(" 3.1.6 DROP TABLE")]),e._v(" "),a("ul",[a("li",[e._v("SQL模式语句：")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("DROP TABLE people\n")])])]),a("ul",[a("li",[e._v("MongoDB 模式语句：")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.people.drop()\n")])])]),a("h3",{attrs:{id:"_3-2-insert"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-insert"}},[e._v("#")]),e._v(" 3.2 Insert")]),e._v(" "),a("p",[e._v("下表显示了与向表中插入记录相关的各种 SQL 语句以及相应的 MongoDB 语句。")]),e._v(" "),a("ul",[a("li",[e._v("SQL INSERT 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('INSERT INTO people(user_id,\n                  age,\n                  status)\nVALUES ("bcd001",\n        45,\n        "A")\n')])])]),a("ul",[a("li",[e._v("Mongodb insertOne() 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('db.people.insertOne(\n   { user_id: "bcd001", age: 45, status: "A" }\n)\n')])])]),a("h3",{attrs:{id:"_3-3-select"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-select"}},[e._v("#")]),e._v(" 3.3 Select")]),e._v(" "),a("p",[e._v("下表显示了与从表中读取记录相关的各种 SQL 语句以及相应的 MongoDB 语句。")]),e._v(" "),a("blockquote",[a("p",[e._v("NOTE：")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/method/db.collection.find/#db.collection.find",target:"_blank",rel:"noopener noreferrer"}},[e._v("find() "),a("OutboundLink")],1),e._v("方法总是包含返回文档中的 "),a("code",[e._v("_id")]),e._v(" 字段，除非通过 "),a("a",{attrs:{href:"https://docs.mongodb.com/manual/tutorial/project-fields-from-query-results/#projection",target:"_blank",rel:"noopener noreferrer"}},[e._v("projection "),a("OutboundLink")],1),e._v("特别排除。 下面的一些 SQL 查询可能包含一个 "),a("code",[e._v("_id")]),e._v(" 字段来反映这一点，即使该字段没有包含在相应的 "),a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/method/db.collection.find/#db.collection.find",target:"_blank",rel:"noopener noreferrer"}},[e._v("find() "),a("OutboundLink")],1),e._v("查询中。")])]),e._v(" "),a("h4",{attrs:{id:"_3-3-1-select-where"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-1-select-where"}},[e._v("#")]),e._v(" 3.3.1 SELECT ... WHERE")]),e._v(" "),a("ul",[a("li",[e._v("SQL 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('SELECT user_id, status\nFROM people\nWHERE status = "A"\n')])])]),a("ul",[a("li",[e._v("Mongodb 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('db.people.find(\n    { status: "A" },\n    { user_id: 1, status: 1, _id: 0 }\n)\n')])])]),a("h4",{attrs:{id:"_3-3-2-select-and"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-2-select-and"}},[e._v("#")]),e._v(" 3.3.2 SELECT ... AND")]),e._v(" "),a("ul",[a("li",[e._v("SQL 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("SELECT *\nFROM people\nWHERE age > 25\nAND   age <= 50\n")])])]),a("ul",[a("li",[e._v("Mongodb 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.people.find(\n   { age: { $gt: 25, $lte: 50 } }\n)\n")])])]),a("h4",{attrs:{id:"_3-3-3-select-or"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-3-select-or"}},[e._v("#")]),e._v(" 3.3.3 SELECT ... OR")]),e._v(" "),a("ul",[a("li",[e._v("SQL 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('SELECT *\nFROM people\nWHERE status = "A"\nOR age = 50\n')])])]),a("ul",[a("li",[e._v("Mongodb 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('db.people.find(\n    { $or: [ { status: "A" } , { age: 50 } ] }\n)\n')])])]),a("h4",{attrs:{id:"_3-3-4-select-like"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-4-select-like"}},[e._v("#")]),e._v(" 3.3.4 SELECT ... LIKE")]),e._v(" "),a("ul",[a("li",[e._v("SQL 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('FROM people\nWHERE user_id like "%bc%"\n')])])]),a("ul",[a("li",[e._v("Mongodb 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.people.find( { user_id: /bc/ } )\n\n-or-\n\ndb.people.find( { user_id: { $regex: /bc/ } } )\n")])])]),a("h4",{attrs:{id:"_3-3-5-select-oeder-by"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-5-select-oeder-by"}},[e._v("#")]),e._v(" 3.3.5 SELECT ... OEDER BY")]),e._v(" "),a("ul",[a("li",[e._v("SQL 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('SELECT *\nFROM people\nWHERE status = "A"\nORDER BY user_id ASC\n')])])]),a("ul",[a("li",[e._v("Mongodb 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('db.people.find( { status: "A" } ).sort( { user_id: 1 } )\n')])])]),a("h4",{attrs:{id:"_3-3-6-select-count"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-6-select-count"}},[e._v("#")]),e._v(" 3.3.6 SELECT ... COUNT")]),e._v(" "),a("ul",[a("li",[e._v("SQL 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("SELECT COUNT(user_id)\nFROM people\n")])])]),a("ul",[a("li",[e._v("Mongodb 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.people.count( { user_id: { $exists: true } } )\n\nor\n\ndb.people.find( { user_id: { $exists: true } } ).count()\n")])])]),a("h4",{attrs:{id:"_3-3-7-select-distinct"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-7-select-distinct"}},[e._v("#")]),e._v(" 3.3.7 SELECT DISTINCT")]),e._v(" "),a("ul",[a("li",[e._v("SQL 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("SELECT DISTINCT(status)\nFROM people\n")])])]),a("ul",[a("li",[e._v("Mongodb 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('db.people.aggregate( [ { $group : { _id : "$status" } } ] )\n\n或者，对于不同的不超过 [BSON 大小限制](https://docs.mongodb.com/manual/reference/limits/#limit-bson-document-size) 的值集\n\ndb.people.distinct( "status" )\n')])])]),a("h4",{attrs:{id:"_3-3-8-select-limit-skip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-8-select-limit-skip"}},[e._v("#")]),e._v(" 3.3.8 SELECT ... LIMIT SKIP")]),e._v(" "),a("ul",[a("li",[e._v("SQL 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("SELECT *\nFROM people\nLIMIT 5\nSKIP 10\n")])])]),a("ul",[a("li",[e._v("Mongodb 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.people.find().limit(5).skip(10)\n")])])]),a("h4",{attrs:{id:"_3-3-9-explain-select"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-9-explain-select"}},[e._v("#")]),e._v(" 3.3.9 EXPLAIN SELECT")]),e._v(" "),a("ul",[a("li",[e._v("SQL 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('EXPLAIN SELECT *\nFROM people\nWHERE status = "A"\n')])])]),a("ul",[a("li",[e._v("Mongodb 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('db.people.find( { status: "A" } ).explain()\n')])])]),a("h3",{attrs:{id:"_3-4-update-records"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-update-records"}},[e._v("#")]),e._v(" 3.4 Update Records")]),e._v(" "),a("p",[e._v("下面显示了与更新表中现有记录相关的各种 SQL 语句以及相应的 MongoDB 语句。")]),e._v(" "),a("h4",{attrs:{id:"_3-4-1-update-set"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-1-update-set"}},[e._v("#")]),e._v(" 3.4.1 UPDATE ... SET")]),e._v(" "),a("ul",[a("li",[e._v("SQL 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('UPDATE people\nSET status = "C"\nWHERE age > 25\n')])])]),a("ul",[a("li",[e._v("Mongodb 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('db.people.updateMany(\n   { age: { $gt: 25 } },\n   { $set: { status: "C" } }\n)\n')])])]),a("h4",{attrs:{id:"_3-4-2-update-inc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-2-update-inc"}},[e._v("#")]),e._v(" 3.4.2 UPDATE ... INC")]),e._v(" "),a("ul",[a("li",[e._v("SQL 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('UPDATE people\nSET age = age + 3\nWHERE status = "A"\n')])])]),a("ul",[a("li",[e._v("Mongodb 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('db.people.updateMany(\n   { status: "A" } ,\n   { $inc: { age: 3 } }\n)\n')])])]),a("h3",{attrs:{id:"_3-5-delete-records"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-delete-records"}},[e._v("#")]),e._v(" 3.5 Delete Records")]),e._v(" "),a("p",[e._v("下面显示了与从表中删除记录相关的各种 SQL 语句以及相应的 MongoDB 语句。")]),e._v(" "),a("h4",{attrs:{id:"_3-5-1-delete-where"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-1-delete-where"}},[e._v("#")]),e._v(" 3.5.1 DELETE WHERE")]),e._v(" "),a("ul",[a("li",[e._v("SQL 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('DELETE FROM people\nWHERE status = "D"\n')])])]),a("ul",[a("li",[e._v("Mongodb 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('db.people.deleteMany( { status: "D" } )\n')])])]),a("h4",{attrs:{id:"_3-5-2-delete"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-2-delete"}},[e._v("#")]),e._v(" 3.5.2 DELETE")]),e._v(" "),a("ul",[a("li",[e._v("SQL 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("DELETE FROM people\n")])])]),a("ul",[a("li",[e._v("Mongodb 语句")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.people.deleteMany({})\n")])])]),a("h2",{attrs:{id:"参考文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[e._v("#")]),e._v(" 参考文章")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://jelly.jd.com/exp/detail?id=5edf432cc27b86015c50187a",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[e._v("从 SQL 到 MongoDB 之概念篇")]),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=r.exports}}]);