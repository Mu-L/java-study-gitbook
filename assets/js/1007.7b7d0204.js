(window.webpackJsonp=window.webpackJsonp||[]).push([[1007],{1387:function(_,t,a){"use strict";a.r(t);var v=a(26),s=Object(v.a)({},(function(){var _=this,t=_.$createElement,a=_._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[a("h1",{attrs:{id:"接口设计之依赖项过多时方案选择"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#接口设计之依赖项过多时方案选择"}},[_._v("#")]),_._v(" 接口设计之依赖项过多时方案选择")]),_._v(" "),a("h2",{attrs:{id:"_1-背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-背景"}},[_._v("#")]),_._v(" 1. 背景")]),_._v(" "),a("p",[_._v("在开发中有时候会面对一些复杂场景，例如")]),_._v(" "),a("ol",[a("li",[_._v("表单项采集项特别多，有二三十个。")]),_._v(" "),a("li",[_._v("针对表单我们还有额外操作，这些操作需要表单中的10个参数")])]),_._v(" "),a("h2",{attrs:{id:"_2-两种方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-两种方案"}},[_._v("#")]),_._v(" 2. 两种方案")]),_._v(" "),a("h3",{attrs:{id:"_2-1-方案1-把需要的参数传过来"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-方案1-把需要的参数传过来"}},[_._v("#")]),_._v(" 2.1 方案1：把需要的参数传过来")]),_._v(" "),a("p",[_._v("传10个基础参数进来（我嫌太多，每个操作接口都要传）")]),_._v(" "),a("h3",{attrs:{id:"_2-2-方案2-每次操作前保存信息-只传表单id"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-方案2-每次操作前保存信息-只传表单id"}},[_._v("#")]),_._v(" 2.2 方案2：每次操作前保存信息，只传表单id")]),_._v(" "),a("p",[_._v("方案2：每次操作前保存基础信息，多传一个表单id就可以（又觉得每次操作前保存是不是太浪费性能）")]),_._v(" "),a("h2",{attrs:{id:"_3-最终方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-最终方案"}},[_._v("#")]),_._v(" 3. 最终方案")]),_._v(" "),a("p",[a("strong",[_._v("我们程序在乎的是性能和用户体验。")])]),_._v(" "),a("p",[_._v("方案2每次保存的方案，需要额外浪费2次不必要的网络请求，")]),_._v(" "),a("ol",[a("li",[_._v("前端先保存表单")]),_._v(" "),a("li",[_._v("后端拿表单id查表单信息")])]),_._v(" "),a("p",[_._v("这两步完全是没必要做的。")]),_._v(" "),a("p",[_._v("如果我们觉得写参数麻烦。我们"),a("strong",[_._v("可以直接把表单对象整个传进去")]),_._v("，暴力一点也没事")]),_._v(" "),a("h2",{attrs:{id:"_4-为什么会有这种问题产生"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-为什么会有这种问题产生"}},[_._v("#")]),_._v(" 4. 为什么会有这种问题产生？")]),_._v(" "),a("p",[_._v("温水煮青蛙的结果")]),_._v(" "),a("ol",[a("li",[_._v("刚开始只需要表单id关联就好")]),_._v(" "),a("li",[_._v("随后需要校验2个表单参数，ok再这几个操作中加2个新字段就好")]),_._v(" "),a("li",[_._v("随着业务的发展，需要校验的数据越来越多。重复参数的增加导致多个操作方法都要加。索性改成通过表单id 后台查一遍")])]),_._v(" "),a("p",[_._v("其实回过头来，如果一开始就有这样的需求，或许自己不会在这两种方案中纠结。")]),_._v(" "),a("p",[_._v("当遇到问题时，要看透本质")])])}),[],!1,null,null,null);t.default=s.exports}}]);