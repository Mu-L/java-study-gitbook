(window.webpackJsonp=window.webpackJsonp||[]).push([[388],{766:function(t,r,_){"use strict";_.r(r);var e=_(26),v=Object(e.a)({},(function(){var t=this,r=t.$createElement,_=t._self._c||r;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"solr高亮"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#solr高亮"}},[t._v("#")]),t._v(" Solr高亮")]),t._v(" "),_("h2",{attrs:{id:"_1-简介"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-简介"}},[t._v("#")]),t._v(" 1. 简介")]),t._v(" "),_("p",[t._v("大多数的搜索应用都存在类似的情况，那就是搜索结果显示的屏幕空间有限。")]),t._v(" "),_("ul",[_("li",[t._v("如果文档很短并可以在结果列表中显示全部内容，对屏幕空间显示就不会构成太大的问题。")]),t._v(" "),_("li",[t._v("但大多数情况下都只能显示每个结果文档的一小部分。")])]),t._v(" "),_("p",[t._v("这就提出了一个问题：如何决定结果文档中显示哪一部分？理想情况下，"),_("strong",[t._v("应该是基于各片段与用户查询的匹配程度来决定")]),t._v("。为查询结果选择最佳片段进行显示，这是Solr高亮框架提供的核心功能。")]),t._v(" "),_("h2",{attrs:{id:"_2-高亮所处流程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-高亮所处流程"}},[t._v("#")]),t._v(" 2.  高亮所处流程")]),t._v(" "),_("h3",{attrs:{id:"_2-1-查询全流程中的高亮"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-查询全流程中的高亮"}},[t._v("#")]),t._v(" 2.1 查询全流程中的高亮")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220418164457501.png",alt:"image-20220418164457501"}})]),t._v(" "),_("h3",{attrs:{id:"_2-2-高亮组件的内部流程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-高亮组件的内部流程"}},[t._v("#")]),t._v(" 2.2 高亮组件的内部流程")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220418164555628.png",alt:"image-20220418164555628"}})]),t._v(" "),_("h2",{attrs:{id:"_3-四种高亮实现"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-四种高亮实现"}},[t._v("#")]),t._v(" 3. 四种高亮实现")]),t._v(" "),_("h3",{attrs:{id:"_3-1-unified-highlighter"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-unified-highlighter"}},[t._v("#")]),t._v(" 3.1 "),_("strong",[t._v("Unified Highlighter ：")])]),t._v(" "),_("p",[t._v("这是最灵活和最具选择性的选项,它支持最常见的突出显示参数，并且可以准确地处理任何查询，甚至是SpanQueries（例如从环绕解析器中可以看到）。 这种方式的的强大优势在于，")]),t._v(" "),_("p",[t._v("您可以选择配置Solr以将更多信息放入底层索引中，以加速突出显示大型文档; 即使在每个字段的基础上，也支持多种配置。 其他方式几乎没有这种灵活性")]),t._v(" "),_("h3",{attrs:{id:"_3-2-original-highlighter-最常用"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-original-highlighter-最常用"}},[t._v("#")]),t._v(" 3.2 "),_("strong",[t._v("Original Highlighter（最常用）：")])]),t._v(" "),_("p",[t._v("这个Original Highlighter是高亮的一个典型.它拥有三个高亮的最复杂的和最细粒度的查询表示法.比如,高亮能够提供精确的匹配,甚至用于如surround这样的查询解析器。")]),t._v(" "),_("p",[t._v("它不要求任何的特殊的数据结果如termVectors.对于一个宽泛种类的搜索情况,这是一个很好的选择.")]),t._v(" "),_("h3",{attrs:{id:"_3-3-fastvector-highlighter"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-fastvector-highlighter"}},[t._v("#")]),t._v(" 3.3 "),_("strong",[t._v("FastVector Highlighter")]),t._v("：")]),t._v(" "),_("p",[t._v("FastVector Highlighter要求字段的term vector选项(termVectors,termPositions,termOffsets).并考虑到是最优化的,对于多语言环境它往往比standard highlighter会更好的工作。")]),t._v(" "),_("p",[t._v("因为它支持Unicode breakiterators(分解迭代).另一方面,它的查询表示没有standard highlighter那么高级.例如,它将不会很好的工作于surround解析器.它经常使用于大文档和多种类语言的高亮文本.")]),t._v(" "),_("h3",{attrs:{id:"_3-4-postings-highlighter"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-postings-highlighter"}},[t._v("#")]),t._v(" 3.4 Postings Highlighter**:")]),t._v(" "),_("p",[t._v("Postings Highlighter要求存储storeOffsetsWithPositions(位置偏移量),需要在字段中配置.这是一个比vectors更简单有效的结果,但是不适合于大数量的查询terms。")]),t._v(" "),_("p",[t._v("像FastVector Highlighter,它支持Unicode算法来分割文档.另一方面,它有很粗略的查询表示:它注重于摘要的质量,完全忽略查询的结构,仅仅基于查询term和统计排序.")]),t._v(" "),_("h2",{attrs:{id:"_4-original-highlighter"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-original-highlighter"}},[t._v("#")]),t._v(" 4. Original Highlighter")]),t._v(" "),_("h3",{attrs:{id:"_4-1-参数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-参数"}},[t._v("#")]),t._v(" 4.1 参数")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("默认")]),t._v(" "),_("th",[t._v("含义")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("hl :")]),t._v(" "),_("td",[t._v("默认为空白(不高亮).")]),t._v(" "),_("td",[t._v("为true时,开启高亮功能,为false或者空白或者缺少时,关闭高亮功能.")])]),t._v(" "),_("tr",[_("td",[t._v("hl.fl:。")]),t._v(" "),_("td",[t._v("默认空白，")]),t._v(" "),_("td",[t._v('指定高亮字段列表.多个字段之间以逗号或空格分开.如果为空白,对于StandardRequestHandler,高亮默认搜索字段(或者指定的df参数).对于DisMaxRequestHandler,qf作为默认的 　　　　　　"'),_("em",[t._v('"可以用于匹配全局,如"text_')]),t._v('"或者"'),_("em",[t._v('",当使用"')]),t._v('"时,hl.requireFieldMatch=true必填.')])]),t._v(" "),_("tr",[_("td",[t._v("hl.snippets :")]),t._v(" "),_("td",[t._v("默认为1.")]),t._v(" "),_("td",[t._v("指定每个字段生成的高亮字段的最大数量.")])]),t._v(" "),_("tr",[_("td",[t._v("hl.fragsize :")]),t._v(" "),_("td",[t._v("默认是100.")]),t._v(" "),_("td",[t._v("每个snippet返回的最大字符数。如果为0，那么该字段不会被fragmented且整个字段的值会被返回。")])]),t._v(" "),_("tr",[_("td",[t._v("hl.mergeContiguous :")]),t._v(" "),_("td",[t._v("默认为false.")]),t._v(" "),_("td",[t._v("知识solr将邻近相连的片段合并为一个单独的片段.true表示合并.默认值为false,为向后兼容设置.")])]),t._v(" "),_("tr",[_("td",[_("strong",[t._v("hl.requireFieldMatch:")])]),t._v(" "),_("td",[t._v("默认为fasle.")]),t._v(" "),_("td",[t._v("如果置为true，除非该字段的查询结果不为空才会被高亮。它的默认值是false，意味 着它可能匹配某个字段却高亮一个不同的字段。如果hl.fl使用了通配符，那么就要启用该参数。 尽管如此，如果你的查询是all字段（可能是使用 copy-field 指令），那么还是把它设为false，这样搜索结果能表明哪个字段的查询文本未被找到")])]),t._v(" "),_("tr",[_("td",[t._v("hl.maxAnalyzedChars:")]),t._v(" "),_("td",[t._v("默认51200.")]),t._v(" "),_("td",[t._v("会搜索高亮的最大字符，默认值为51200，如果你想禁用，设为-1")])]),t._v(" "),_("tr",[_("td",[t._v("hl.maxMultiValuedToExamine:")]),t._v(" "),_("td",[t._v("默认integer.MAX_VALUE.")]),t._v(" "),_("td",[t._v("在停止之前,指定检查的多值字段的最大条木数.在任何匹配没有找到之前,如果达到限制,可能会返回0个结果.")])]),t._v(" "),_("tr",[_("td",[t._v("hl.maxMultiValuedToMatch:")]),t._v(" "),_("td",[t._v("默认integer.MAX_VALUE.")]),t._v(" "),_("td",[t._v("在停止之前,指定在多值字段中找到的最大匹配数.如果hl.maxMultiValuedToExamine也已经定义了,首先达到的限制将决定何时停止查找。")])]),t._v(" "),_("tr",[_("td",[t._v("hl.alternateField:")]),t._v(" "),_("td",[t._v("默认blank.")]),t._v(" "),_("td",[t._v("如果没有生成snippet（没有terms 匹配），那么使用另一个字段值作为返回。")])]),t._v(" "),_("tr",[_("td",[t._v("hl.maxAlternateFieldLength :")]),t._v(" "),_("td",[t._v("默认 unlimited.")]),t._v(" "),_("td",[t._v("如果hl.alternateField启用，则有时需要制定alternateField的最大字符长度，默认0是即没有限制。所以合理的值是应该为 　hl.snippets * hl.fragsize这样返回结果的大小就能保持一致。")])]),t._v(" "),_("tr",[_("td",[t._v("hl.formatter :")]),t._v(" "),_("td",[t._v("默认 simple.")]),t._v(" "),_("td",[t._v("一个提供可替换的formatting算法的扩展点。默认值是simple，这是目前仅有的选项。显然这不够用，你可 以看看org.apache.solr.highlight.HtmlFormatter.java 和 　solrconfig.xml中highlighting元素是如何配置的。 注意在不论原文中被高亮了什么值的情况下，如预先已存在的em tags，也不会被转义，所以在有时会导致假的高亮。")])]),t._v(" "),_("tr",[_("td",[t._v("hl.simple.pre hl.simple.post :")]),t._v(" "),_("td",[t._v("默认"),_("em",[t._v(" and ")]),t._v(" ．")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("hl.fragmenter :")]),t._v(" "),_("td",[t._v("默认gap．")]),t._v(" "),_("td",[t._v("这个是solr制定fragment算法的扩展点。gap是默认值。regex是另一种选项，这种选项指明 highlight的边界由一个正则表达式确 定。这是一种非典型 的高级选项。 为了知道默认设置和fragmenters (and formatters)是如何配置的，可以看看solrconfig.xml中的highlight段。")])]),t._v(" "),_("tr",[_("td",[t._v("hl.usePhraseHighlighter :")]),t._v(" "),_("td",[t._v("默认true．")]),t._v(" "),_("td",[t._v("如果一个查询中含有短语（引号框起来的）那么会保证一定要完全匹配短语的才会被高亮")])]),t._v(" "),_("tr",[_("td",[t._v("hl.highlightMultiTerm : 。")]),t._v(" "),_("td",[t._v("默认true.")]),t._v(" "),_("td",[t._v("如果设置为true,solr将会高亮出现在多terms查询中的短语")])]),t._v(" "),_("tr",[_("td",[t._v("hl.regex.slop:")]),t._v(" "),_("td",[t._v("默认0.6.")]),t._v(" "),_("td",[t._v("在使用hl.fragmenter=regex时,意思是如果hl.fragsize=100那么fragment的大小会从40-160.")])]),t._v(" "),_("tr",[_("td",[t._v("hl.regex.pattern:")]),t._v(" "),_("td",[t._v("默认空白.")]),t._v(" "),_("td",[t._v("为fragmenting指定正则表达式.这个可以用作提取句子。")])]),t._v(" "),_("tr",[_("td",[t._v("hl.regex.maxAnalyzedChars:")]),t._v(" "),_("td",[t._v("默认10000.")]),t._v(" "),_("td",[t._v("搜索高亮的最大字符,对一个大字段使用一个复杂的正则表达式是非常昂贵的。")])]),t._v(" "),_("tr",[_("td",[t._v("hl.preserveMulti :")]),t._v(" "),_("td",[t._v("默认false.")]),t._v(" "),_("td",[t._v("如果为true,多值字段将会按照它们在索引中顺序返回所有的值.如果false,只有匹配高亮请求的值返回。")])])])]),t._v(" "),_("h2",{attrs:{id:"参考文章"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://www.cnblogs.com/yszd/p/12867697.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Solr搜索结果高亮及高级设置 "),_("OutboundLink")],1)])])}),[],!1,null,null,null);r.default=v.exports}}]);