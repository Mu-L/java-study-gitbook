(window.webpackJsonp=window.webpackJsonp||[]).push([[926],{1303:function(a,t,s){"use strict";s.r(t);var n=s(26),e=Object(n.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"linux安装nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linux安装nginx"}},[a._v("#")]),a._v(" Linux安装nginx")]),a._v(" "),s("h2",{attrs:{id:"_1-安装步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装步骤"}},[a._v("#")]),a._v(" 1. 安装步骤")]),a._v(" "),s("h3",{attrs:{id:"_1-1-安装依赖包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-安装依赖包"}},[a._v("#")]),a._v(" 1.1 安装依赖包")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("//一键安装上面四个依赖\nyum -y install gcc zlib zlib-devel pcre-devel openssl openssl-devel\n")])])]),s("h3",{attrs:{id:"_1-2-下载并解压安装包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-下载并解压安装包"}},[a._v("#")]),a._v(" 1.2 下载并解压安装包")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("//下载tar包\nwget http://nginx.org/download/nginx-1.16.1.tar.gz\ntar -xvf nginx-1.16.1.tar.gz\n")])])]),s("p",[a._v("wget 下载的tar包版本可以通过"),s("a",{attrs:{href:"https://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("nginx官网"),s("OutboundLink")],1),a._v("查看")]),a._v(" "),s("h3",{attrs:{id:"_1-3-安装nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-安装nginx"}},[a._v("#")]),a._v(" 1.3 安装nginx")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("//进入nginx目录\ncd nginx-1.16.1\n//执行命令\n./configure\n//执行make命令\nmake\n//执行make install命令\nmake install\n")])])]),s("p",[a._v("安装完成会在/usr/local目录下出现nginx")]),a._v(" "),s("ul",[s("li",[a._v("注：如果需要支持http需要加如上")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("./configure  --with-http_ssl_module\n")])])]),s("h3",{attrs:{id:"_1-4-配置nginx-conf"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-配置nginx-conf"}},[a._v("#")]),a._v(" 1.4 配置nginx.conf")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 打开配置文件\nvi /usr/local/nginx/conf/nginx.conf\n")])])]),s("p",[a._v("按需修改配置")]),a._v(" "),s("p",[a._v("如默认端口为80，可以修改成想要的地址")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("server {\n        listen       80;\n        server_name  localhost;\n        ...\n        }\n")])])]),s("h3",{attrs:{id:"_1-5-启动nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-启动nginx"}},[a._v("#")]),a._v(" 1.5 启动nginx")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("/usr/local/nginx/sbin/nginx -s reload\n")])])]),s("p",[a._v("查看nginx进程是否启动")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("ps -ef | grep nginx\n")])])]),s("h3",{attrs:{id:"_1-6-浏览器打开"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-浏览器打开"}},[a._v("#")]),a._v(" 1.6 浏览器打开")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190907221848439.png",alt:"image-20190907221848439"}})]),a._v(" "),s("h2",{attrs:{id:"_2-启动可能遇到的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-启动可能遇到的问题"}},[a._v("#")]),a._v(" 2. 启动可能遇到的问题")]),a._v(" "),s("h3",{attrs:{id:"_2-1-logs-文件夹目录没有"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-logs-文件夹目录没有"}},[a._v("#")]),a._v(" 2.1 logs 文件夹目录没有")]),a._v(" "),s("p",[a._v("错误提示如下")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v(' [alert] could not open error log file: open() "/usr/local/nginx/logs/error.log" failed (2: No such file or directory)\n')])])]),s("p",[a._v("解决方案：在提示的指定目录创建logs文件夹")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mkdir logs\n")])])]),s("h3",{attrs:{id:"_2-2-nginx-pid-异常"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-nginx-pid-异常"}},[a._v("#")]),a._v(" 2.2 nginx.pid 异常")]),a._v(" "),s("p",[a._v("错误提示如下")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v(' [error] 21478#0: open() "/usr/local/nginx/logs/nginx.pid" failed (2: No such file or directory)\n')])])]),s("p",[a._v("解决方案：先设置配置文件")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf\n")])])]),s("h3",{attrs:{id:"_2-3-启动无反应-error-log-疯狂打印-worker-process-22327-exited-on-signal"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-启动无反应-error-log-疯狂打印-worker-process-22327-exited-on-signal"}},[a._v("#")]),a._v(" 2.3 启动无反应，error.log 疯狂打印 worker process 22327 exited on signal")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210115112252704.png",alt:"image-20210115112252704"}})]),a._v(" "),s("p",[a._v("因为nginx对fastdfs进行了代理,我们启动fdfs 即可恢复")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("/etc/init.d/fdfs_trackerd start\n")])])]),s("h2",{attrs:{id:"_3-nginx-命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-nginx-命令"}},[a._v("#")]),a._v(" 3. nginx 命令")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("./nginx 启动\n\n./nginx -s stop 关闭\n\n./nginx -s reload 重启\n")])])]),s("h2",{attrs:{id:"_4-附录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-附录"}},[a._v("#")]),a._v(" 4. 附录")]),a._v(" "),s("h3",{attrs:{id:"_4-1-rpm-版本-nginx-部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-rpm-版本-nginx-部署"}},[a._v("#")]),a._v(" 4.1 rpm 版本 Nginx 部署")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("上传nginx对应版本的rpm")])]),a._v(" "),s("li",[s("p",[a._v("安装rpm")]),a._v(" "),s("p",[a._v("rpm -ivh nginx-1.16.1-1.el6.ngx.x86_64.rpm")])]),a._v(" "),s("li",[s("p",[a._v("启动nginx")]),a._v(" "),s("p",[a._v("service nginx start")])]),a._v(" "),s("li",[s("p",[a._v("创建前端存放文件夹")]),a._v(" "),s("p",[a._v("mkdir /usr/share/nginx/html/frontend")])]),a._v(" "),s("li",[s("p",[a._v("替换配置文件")]),a._v(" "),s("p",[a._v("替换覆盖nginx.conf 到/etc/nginx/目录下")])])]),a._v(" "),s("h2",{attrs:{id:"参考文章"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[a._v("#")]),a._v(" 参考文章")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://www.debugger.wiki/article/html/1575597633434520",target:"_blank",rel:"noopener noreferrer"}},[a._v("nginx重启后，反向代理失败之问题排查记录"),s("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);