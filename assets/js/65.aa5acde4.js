(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{442:function(t,a,r){"use strict";r.r(a);var e=r(26),_=Object(e.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"java堆设置多大合适"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#java堆设置多大合适"}},[t._v("#")]),t._v(" Java堆设置多大合适")]),t._v(" "),r("h2",{attrs:{id:"_1-简介"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-简介"}},[t._v("#")]),t._v(" 1. 简介")]),t._v(" "),r("p",[t._v("针对堆空间的优化是Java性能调优的重点之一。如果没有设置JVM堆空间大小，JVM会根据服务器物理内存大小设置默认堆大小的值。例如，在64位的服务器端，")]),t._v(" "),r("ul",[r("li",[t._v("当物理内存小于192MB时，JVM堆大小默认选为物理内存的一半；")]),t._v(" "),r("li",[r("strong",[t._v("当物理内存大192MB且小于128GB时，JVM堆大小默认选为物理内存的四分之一")]),t._v("；")]),t._v(" "),r("li",[t._v("当物理内存大于等于128GB时，都为32GB。")])]),t._v(" "),r("p",[t._v("通常情况下，Java应用程序的会通过参数指定堆大小，具体方法下文会有说明。")]),t._v(" "),r("h2",{attrs:{id:"_2-推荐配置原则"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-推荐配置原则"}},[t._v("#")]),t._v(" 2. 推荐配置原则：")]),t._v(" "),r("ol",[r("li",[t._v("应用程序运行时，计算"),r("strong",[t._v("老年代存活对象的占用空间大小X")]),t._v("。\n"),r("ol",[r("li",[t._v("程序整个堆大小（Xmx和Xms）设置为X的3~4倍；")]),t._v(" "),r("li",[t._v("永久代PermSize和MaxPermSize设置为X的1.2~1.5倍。")]),t._v(" "),r("li",[t._v("年轻代Xmn的设置为X的1~1.5倍。老年代内存大小设置为X的2~3倍。")])])]),t._v(" "),r("li",[t._v("JDK官方建议年轻代占整个堆大小空间的3/8左右。")]),t._v(" "),r("li",[t._v("完成一次Full GC后，应该释放出70%的堆空间（30%的空间仍然占用）。")]),t._v(" "),r("li",[t._v("设置JVM 初始堆内存-Xms和最大堆内-Xmx相同，"),r("strong",[t._v("以避免每次垃圾回收完成后JVM重新分配内存。")])])]),t._v(" "),r("h2",{attrs:{id:"_3-暴力设置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-暴力设置"}},[t._v("#")]),t._v(" 3. 暴力设置")]),t._v(" "),r("p",[t._v("若依和IBM等堆大小都设置为512M, 如有额外需求，才根据上面原则进行调整")]),t._v(" "),r("blockquote",[r("p",[t._v("对于大多数环境而言，最大 Java 堆大小为 512 兆字节（如上图所示）已足够。")]),t._v(" "),r("p",[t._v("---"),r("a",{attrs:{href:"https://www.ibm.com/docs/zh/itcam-app-mgr/7.2.1?topic=spa-setting-maximum-java-heap-size-1",target:"_blank",rel:"noopener noreferrer"}},[t._v("IBM 文档"),r("OutboundLink")],1)])]),t._v(" "),r("h2",{attrs:{id:"参考文章"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://support.huaweicloud.com/tuningtip-kunpenggrf/kunpengtuning_12_0063.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("华为鲲鹏-设置JVM堆空间大小"),r("OutboundLink")],1)]),t._v(" "),r("p",[r("a",{attrs:{href:"https://www.ibm.com/docs/zh/itcam-app-mgr/7.2.1?topic=spa-setting-maximum-java-heap-size-1",target:"_blank",rel:"noopener noreferrer"}},[t._v("IBM 文档"),r("OutboundLink")],1)]),t._v(" "),r("p",[r("a",{attrs:{href:"https://blog.csdn.net/weixin_28782251/article/details/114547003",target:"_blank",rel:"noopener noreferrer"}},[t._v("java堆设置成多少合适_jvm~xmx设置多少合适"),r("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=_.exports}}]);