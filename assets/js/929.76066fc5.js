(window.webpackJsonp=window.webpackJsonp||[]).push([[929],{1306:function(s,e,t){"use strict";t.r(e);var a=t(26),n=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"nginx设置开机自启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx设置开机自启动"}},[s._v("#")]),s._v(" nginx设置开机自启动")]),s._v(" "),t("blockquote",[t("p",[s._v("centos 7开机自启动有两种不同的设置方式，如果是yum直接安装的软件服务，则直接开启即可，如果是源码编译安装的，则需要在系统服务（system）创建service文件，然后才能设置。")])]),s._v(" "),t("h2",{attrs:{id:"_1-前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-前言"}},[s._v("#")]),s._v(" 1.  前言")]),s._v(" "),t("p",[s._v("centos 7以上是用Systemd进行系统初始化的，Systemd 是 Linux 系统中最新的初始化系统（init），它主要的设计目标是克服 sysvinit 固有的缺点，提高系统的启动速度。")]),s._v(" "),t("h2",{attrs:{id:"_2-安装方式为-yum直接安装nginx服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装方式为-yum直接安装nginx服务"}},[s._v("#")]),s._v(" 2. 安装方式为：yum直接安装Nginx服务")]),s._v(" "),t("p",[s._v("Systemd服务文件以"),t("code",[s._v(".service")]),s._v("结尾，比如现在要建立nginx为开机启动，如果用"),t("code",[s._v("yum install")]),s._v("命令安装的，yum命令会自动创建"),t("code",[s._v("nginx.service")]),s._v("文件，直接用命令:")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("systemcel "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" nginx.service\n")])])]),t("h2",{attrs:{id:"_3-安装方式为-源码编译安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装方式为-源码编译安装"}},[s._v("#")]),s._v(" 3.安装方式为： 源码编译安装")]),s._v(" "),t("p",[s._v("在这里我是用源码编译安装的，所以要手动创建"),t("code",[s._v("nginx.service")]),s._v("服务文件。开机没有登陆情况下就能运行的程序，存在系统服务（system）里，即：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("/lib/systemd/system/\n")])])]),t("h3",{attrs:{id:"_3-1-创建nginx-service文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-创建nginx-service文件"}},[s._v("#")]),s._v(" 3.1 创建nginx.service文件")]),s._v(" "),t("p",[s._v("在系统服务目录里创建nginx.service文件")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("vim /lib/systemd/system/nginx.service\n")])])]),t("p",[s._v("写入内容如下：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[Unit]\nDescription=nginx\nAfter=network.target\n  \n[Service]\nType=forking\nExecStart=/usr/local/nginx/sbin/nginx\nExecReload=/usr/local/nginx/sbin/nginx -s reload\nExecStop=/usr/local/nginx/sbin/nginx -s quit\nPrivateTmp=true\n  \n[Install]\nWantedBy=multi-user.target\n")])])]),t("p",[t("strong",[s._v("[Unit]:服务的说明")])]),s._v(" "),t("p",[s._v("Description:描述服务\nAfter:描述服务类别\n[Service]服务运行参数的设置\nType=forking是后台运行的形式\nExecStart为服务的具体运行命令\nExecReload为重启命令\nExecStop为停止命令\nPrivateTmp=True表示给服务分配独立的临时空间\n注意：[Service]的启动、重启、停止命令全部要求使用绝对路径\n[Install]运行级别下服务安装的相关设置，可设置为多用户，即系统运行级别为3")]),s._v(" "),t("h3",{attrs:{id:"_3-2-设置开机启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-设置开机启动"}},[s._v("#")]),s._v(" 3.2 设置开机启动")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("systemctl enable nginx.service\n")])])]),t("h3",{attrs:{id:"_3-3-查看nginx状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-查看nginx状态"}},[s._v("#")]),s._v(" 3.3 查看nginx状态")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("systemctl status nginx.service\n")])])]),t("h3",{attrs:{id:"_3-4-其他命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-其他命令"}},[s._v("#")]),s._v(" 3.4 其他命令")]),s._v(" "),t("p",[s._v("启动nginx服务")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("systemctl start nginx.service　\n")])])]),t("p",[s._v("设置开机自启动")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("systemctl enable nginx.service\n")])])]),t("p",[s._v("停止开机自启动")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("systemctl disable nginx.service\n")])])]),t("p",[s._v("查看服务当前状态")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("systemctl status nginx.service\n")])])]),t("p",[s._v("重新启动服务")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("systemctl status nginx.service\n")])])]),t("p",[s._v("查看所有已启动的服务")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("systemctl list-units --type=service\n")])])]),t("h2",{attrs:{id:"参考文章"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[s._v("#")]),s._v(" 参考文章")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://segmentfault.com/a/1190000022665540",target:"_blank",rel:"noopener noreferrer"}},[s._v("CentOS7.5 设置 Nginx 开机自启动"),t("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=n.exports}}]);