(window.webpackJsonp=window.webpackJsonp||[]).push([[936],{1312:function(t,a,s){"use strict";s.r(a);var r=s(26),e=Object(r.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"tomcat优化一-优化自身的配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tomcat优化一-优化自身的配置"}},[t._v("#")]),t._v(" Tomcat优化一：优化自身的配置")]),t._v(" "),s("h2",{attrs:{id:"_1-简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-简介"}},[t._v("#")]),t._v(" 1. 简介")]),t._v(" "),s("p",[t._v("Tomcat服务器在JavaEE项目中使用率非常高，所以在生产环境对Tomcat的优化也变得非常重要了。")]),t._v(" "),s("p",[t._v("对于Tomcat的优化，主要是从2个方面入手，一是"),s("strong",[t._v("Tomcat自身的配置")]),t._v("，另一个是"),s("strong",[t._v("Tomcat所运行的jvm虚拟机的调优")]),t._v("。")]),t._v(" "),s("h2",{attrs:{id:"_2-前置配置-登录系统-配置tomcat用户"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-前置配置-登录系统-配置tomcat用户"}},[t._v("#")]),t._v(" 2. 前置配置：登录系统，配置tomcat用户")]),t._v(" "),s("p",[t._v("如果不配置tomcat用户，那么查看tomcat状态时，将会出现403错误")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20210728220240999.png",alt:"image-20210728220240999"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20210728220259132.png",alt:"image-20210728220259132"}})]),t._v(" "),s("p",[t._v("如果需要登录系统，必须配置tomcat用户，在安装完Tomcat后，进行如下操作")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("/conf/tomcat-users.xml")]),t._v("文件中的"),s("code",[t._v("<tomcat-users>")]),t._v("标签里面添加如下内容")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 修改配置文件，配置tomcat的管理用户 --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("role "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("rolename")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"manager"')]),t._v("/"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("role "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("rolename")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"manager-gui"')]),t._v("/"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("role "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("rolename")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),t._v("/"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("role "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("rolename")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin-gui"')]),t._v("/"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("user "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("username")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tomcat"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("password")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tomcat"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("roles")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin-gui,admin,manager-gui,manager"')]),t._v("/"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("如果是tomcat7，配置了tomcat用户就可以登录系统了，但是tomcat8中不行，还需要修改另一个配置文件，否则访问不了，提示403，打开"),s("code",[t._v("webapps/manager/META-INF/context.xml")]),t._v("文件")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 将Valve标签的内容注释掉，保存退出即可 --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("?xml "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("encoding")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UTF-8"')]),t._v("?"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Context "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("antiResourceLocking")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("privileged")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("--"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Valve "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("className")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"org.apache.catalina.valves.RemoteAddrValve"')]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("allow")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127\\.\\d+\\.\\d+\\.\\d+|::1|0:0:0:0:0:0:0:1"')]),t._v(" /"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("--"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Manager "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sessionAttributeValueClassNameFilter")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"java\\.lang\\.(?:Boolean|Integer|Long|Number|String)|org\\.apache\\.catalina\\.filters\\.CsrfPreventionFilter\\'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$LruCache")]),t._v("(?:\\"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v(')?|java\\.util\\.(?:Linked)?HashMap"')]),t._v("/"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/Context"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("再次点击的时候，就需要输入账户密码了：tomcat/tomcat")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20210728220849612.png",alt:"image-20210728220849612"}})]),t._v(" "),s("p",[t._v("登录之后可以看到服务器状态等信息，主要包括服务器信息，JVM，ajp和http信息")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20210728220924142.png",alt:"image-20210728220924142"}})]),t._v(" "),s("h2",{attrs:{id:"_3-优化1-ajp连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-优化1-ajp连接"}},[t._v("#")]),t._v(" 3. 优化1：AJP连接")]),t._v(" "),s("blockquote",[s("p",[t._v("新版tomcat8，已自动禁止")])]),t._v(" "),s("p",[t._v("在服务状态页面中可以看到，默认状态下会启用AJP服务，并且占用8009端口。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20210728221223607.png",alt:"image-20210728221223607"}})]),t._v(" "),s("h3",{attrs:{id:"_3-1-什么是ajp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-什么是ajp"}},[t._v("#")]),t._v(" 3.1 什么是AJP")]),t._v(" "),s("p",[t._v("AJP（Apache JServer Protocol）\nAJPv13协议是面向包的。WEB服务器和Servlet容器通过TCP连接来交互；为了节省SOCKET创建的昂贵代价，WEB服务器会尝试维护一个永久TCP连接到servlet容器，并且在多个请求和响应周期过程会重用连接。\n"),s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20210728221317207.png",alt:"image-20210728221317207"}})]),t._v(" "),s("p",[t._v("我们一般是使用Nginx+Tomcat的架构，所以用不着AJP协议，把AJP连接器禁用。")]),t._v(" "),s("p",[t._v("修改conf下的server.xml文件，将AJP服务禁用掉即可。")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 禁用AJP连接 --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Connector "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8009"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("protocol")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"AJP/1.3"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("redirectPort")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8443"')]),t._v(" /"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("重启tomcat，查看效果。可以看到AJP服务已经不存在了。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20210728221415136.png",alt:"image-20210728221415136"}})]),t._v(" "),s("h2",{attrs:{id:"_4-优化2-执行器-线程池"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-优化2-执行器-线程池"}},[t._v("#")]),t._v(" 4. 优化2：执行器（线程池）")]),t._v(" "),s("p",[t._v("在tomcat中每一个用户请求都是一个线程，所以可以使用线程池提高性能。")]),t._v(" "),s("p",[t._v("修改server.xml文件：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("--将注释打开--"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Executor "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tomcatThreadPool"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("namePrefix")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"catalina-exec-"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("maxThreads")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"500"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("minSpareThreads")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"50"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("prestartminSpareThreads")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("maxQueueSize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"100"')]),t._v("/"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("--\n参数说明：\nmaxThreads：最大并发数，默认设置 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("，一般建议在 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v(" ~ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("，根据硬件设施和业务来判断\nminSpareThreads：Tomcat 初始化时创建的线程数，默认设置 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),t._v("\nprestartminSpareThreads： 在 Tomcat 初始化的时候就初始化 minSpareThreads 的参数值，如果不等于 true，minSpareThreads 的值就没啥效果了\nmaxQueueSize，最大的等待队列数，超过则拒绝请求\n--"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("--在Connector中设置executor属性指向上面的执行器--"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Connector "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("executor")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tomcatThreadPool"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8080"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("protocol")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HTTP/1.1"')]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("connectionTimeout")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20000"')]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("redirectPort")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8443"')]),t._v(" /"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("保存退出，重启tomcat，查看效果。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20210728222804439.png",alt:"image-20210728222804439"}})]),t._v(" "),s("p",[t._v("在页面中显示最大线程数为-1，这个是正常的，仅仅是显示的问题，实际使用的是指定的值。如果配置了一个Executor，则该属性的任何值将被正确记录，但是它将被显示为-1")]),t._v(" "),s("h2",{attrs:{id:"_5-优化3-3种运行模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-优化3-3种运行模式"}},[t._v("#")]),t._v(" 5. 优化3：3种运行模式")]),t._v(" "),s("p",[t._v("tomcat的运行模式有3种：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("bio\n性能非常低下，没有经过任何优化处理和支持")])]),t._v(" "),s("li",[s("p",[t._v("nio\nnio(new I/O)，是Java SE 1.4及后续版本提供的一种新的I/O操作方式(即java.nio包及其子包)。Java nio是一个基于缓冲区、并能提供非阻塞I/O操作的Java API，因此nio也被看成是non-blocking I/O的缩写。它拥有比传统I/O操作(bio)更好的并发运行性能。Tomcat8默认使用nio运行模式。")])]),t._v(" "),s("li",[s("p",[t._v("apr\n安装起来最困难，但是从操作系统级别来解决异步的IO问题，大幅度的提高性能")])])]),t._v(" "),s("p",[t._v("对于每种协议，Tomcat都提供了对应的I/O方式的实现，而且Tomcat官方还提供了在每种协议下每种I/O实现方案的差异， HTTP协议下的处理方式如下表，详情可查看Tomcat官网说明")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th",[t._v("BIO")]),t._v(" "),s("th",[t._v("NIO")]),t._v(" "),s("th",[t._v("NIO2")]),t._v(" "),s("th",[t._v("APR")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("类名")]),t._v(" "),s("td",[s("code",[t._v("Http11Protocol")])]),t._v(" "),s("td",[s("code",[t._v("Http11NioProtocol")])]),t._v(" "),s("td",[s("code",[t._v("Http11Nio2Protocol")])]),t._v(" "),s("td",[s("code",[t._v("Http11AprProtocol")])])]),t._v(" "),s("tr",[s("td",[t._v("引用版本")]),t._v(" "),s("td",[t._v("≥3.0")]),t._v(" "),s("td",[t._v("≥6.0")]),t._v(" "),s("td",[t._v("≥8.0")]),t._v(" "),s("td",[t._v("≥5.5")])]),t._v(" "),s("tr",[s("td",[t._v("轮询支持")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("是")])]),t._v(" "),s("tr",[s("td",[t._v("轮询队列大小")]),t._v(" "),s("td",[t._v("N/A")]),t._v(" "),s("td",[s("code",[t._v("maxConnections")])]),t._v(" "),s("td",[s("code",[t._v("maxConnections")])]),t._v(" "),s("td",[s("code",[t._v("maxConnections")])])]),t._v(" "),s("tr",[s("td",[t._v("读请求头")]),t._v(" "),s("td",[t._v("阻塞")]),t._v(" "),s("td",[t._v("非阻塞")]),t._v(" "),s("td",[t._v("非阻塞")]),t._v(" "),s("td",[t._v("阻塞")])]),t._v(" "),s("tr",[s("td",[t._v("读请求体")]),t._v(" "),s("td",[t._v("阻塞")]),t._v(" "),s("td",[t._v("阻塞")]),t._v(" "),s("td",[t._v("阻塞")]),t._v(" "),s("td",[t._v("阻塞")])]),t._v(" "),s("tr",[s("td",[t._v("写响应")]),t._v(" "),s("td",[t._v("阻塞")]),t._v(" "),s("td",[t._v("阻塞")]),t._v(" "),s("td",[t._v("阻塞")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("等待新请求")]),t._v(" "),s("td",[t._v("阻塞")]),t._v(" "),s("td",[t._v("非阻塞")]),t._v(" "),s("td",[t._v("非阻塞")]),t._v(" "),s("td",[t._v("非阻塞")])]),t._v(" "),s("tr",[s("td",[t._v("SSL支持")]),t._v(" "),s("td",[t._v("Java SSL")]),t._v(" "),s("td",[t._v("Java SSL")]),t._v(" "),s("td",[t._v("Java SSL")]),t._v(" "),s("td",[t._v("Open SSL")])]),t._v(" "),s("tr",[s("td",[t._v("SSL握手")]),t._v(" "),s("td",[t._v("阻塞")]),t._v(" "),s("td",[t._v("非阻塞")]),t._v(" "),s("td",[t._v("非阻塞")]),t._v(" "),s("td",[t._v("阻塞")])]),t._v(" "),s("tr",[s("td",[t._v("最大链接数")]),t._v(" "),s("td",[s("code",[t._v("maxConnections")])]),t._v(" "),s("td",[s("code",[t._v("maxConnections")])]),t._v(" "),s("td",[s("code",[t._v("maxConnections")])]),t._v(" "),s("td",[s("code",[t._v("maxConnections")])])])])]),t._v(" "),s("p",[t._v("推荐使用nio，在tomcat8中有最新的nio2，速度更快，建议使用nio2")]),t._v(" "),s("p",[t._v("设置nio2：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Connector "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("executor")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tomcatThreadPool"')]),t._v("  "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8080"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("protocol")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"org.apache.coyote.http11.Http11Nio2Protocol"')]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("connectionTimeout")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20000"')]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("redirectPort")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8443"')]),t._v(" /"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/image-20210728223416722.png",alt:"image-20210728223416722"}})]),t._v(" "),s("p",[t._v("可以看到已经设置为nio2了。")]),t._v(" "),s("h2",{attrs:{id:"参考文章"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/ThinkWon/article/details/102744033",target:"_blank",rel:"noopener noreferrer"}},[t._v("史上最强Tomcat8性能优化"),s("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=e.exports}}]);