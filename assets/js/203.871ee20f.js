(window.webpackJsonp=window.webpackJsonp||[]).push([[203],{580:function(s,a,t){"use strict";t.r(a);var o=t(26),e=Object(o.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"dockercompose安装mongodb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dockercompose安装mongodb"}},[s._v("#")]),s._v(" DockerCompose安装MongoDB")]),s._v(" "),t("h2",{attrs:{id:"_1-介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-介绍"}},[s._v("#")]),s._v(" 1. 介绍")]),s._v(" "),t("p",[s._v("docker-compose 使用比dockerfile 更加方便")]),s._v(" "),t("h2",{attrs:{id:"_2-实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-实例"}},[s._v("#")]),s._v(" 2. 实例")]),s._v(" "),t("ol",[t("li",[s._v("配置 docker-compose-mongodb.yml")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("version: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\nservices:\n  mongodb:\n    image: mongo:4.2.6\n    restart: always\n    volumes:\n      - /home/mongodb/db:/data/db\n      - /home/mongodb/log:/var/log/mongodb\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#      - /home/mongo_data_dump:/data")]),s._v("\n    ports:\n      - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(":27017\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    environment:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#      MONGO_INITDB_ROOT_USERNAME: admin")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#      MONGO_INITDB_ROOT_PASSWORD: admin     ")]),s._v("\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[t("p",[s._v("新建目录")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /home/mongodb/db\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /home/mongodb/log\n")])])]),t("blockquote",[t("p",[s._v("一般我们希望对镜像中的磁盘做外部映射，这样即使容器退出了，下次启动，容器中保留的数据不会丢失。")])])]),s._v(" "),t("li",[t("p",[s._v("运行")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("docker-compose -f docker-compose-mongodb.yml up -d\n")])])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);