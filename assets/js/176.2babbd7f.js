(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{553:function(t,s,e){"use strict";e.r(s);var a=e(26),_=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"序列"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#序列"}},[t._v("#")]),t._v(" 序列")]),t._v(" "),e("p",[t._v("create sequence SEQ_TEST")]),t._v(" "),e("p",[t._v("minvalue 1        --最小值")]),t._v(" "),e("p",[t._v("nomaxvalue        --不设置最大值")]),t._v(" "),e("p",[t._v("start with 1      --从1开始计数")]),t._v(" "),e("p",[t._v("increment by 1    --每次加1个")]),t._v(" "),e("p",[t._v("nocycle           --一直累加，不循环")]),t._v(" "),e("p",[t._v("nocache;          --不建缓冲区")]),t._v(" "),e("h2",{attrs:{id:"_1-创建序列"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建序列"}},[t._v("#")]),t._v(" 1. 创建序列")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("create sequence seq_user\n  increment by 1\n  minvalue 1\n  nomaxvalue\n  start with 1\n  nocycle \n  cache 20;\n")])])]),e("h2",{attrs:{id:"_2-修改序列的当前值的3种方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-修改序列的当前值的3种方式"}},[t._v("#")]),t._v(" 2. 修改序列的当前值的3种方式")]),t._v(" "),e("h3",{attrs:{id:"_2-1-方式一-使用plsql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-方式一-使用plsql"}},[t._v("#")]),t._v(" 2.1 "),e("strong",[t._v("方式一：使用plsql；")])]),t._v(" "),e("p",[t._v("打开plsql，找到sequences")]),t._v(" "),e("p",[t._v("找到要修改的序列--》右键--》编辑--》更改：下一个数字的值即可。")]),t._v(" "),e("h3",{attrs:{id:"_2-2-方式二-重建序列"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-方式二-重建序列"}},[t._v("#")]),t._v(" 2.2  "),e("strong",[t._v("方式二：重建序列；")])]),t._v(" "),e("p",[t._v("错误方式：")]),t._v(" "),e("p",[t._v("具体步骤是：删除原来的序列，重新创建。")]),t._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 删除序列")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DROP")]),t._v(" SEQUENCE seq_sys_dept"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 重建序列")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 其中，start with 后面跟的就是起始值（下次调用此序列时，将会出现的值）")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" SEQUENCE seq_sys_dept\n    minvalue "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    maxvalue "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("9999999999999999999")]),t._v("\n    INCREMENT "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("START")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WITH")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23725")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("start with 后面跟的就是起始值（下次调用此序列时，将会出现的值） 。")]),t._v(" "),e("h3",{attrs:{id:"_2-3-方式三-使用sql。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-方式三-使用sql。"}},[t._v("#")]),t._v(" 2.3 "),e("strong",[t._v("方式三：使用sql。")])]),t._v(" "),e("p",[t._v("这一个，是本文的重点；")]),t._v(" "),e("p",[t._v("我们由方式一可以知道：通过plsql的可视化操作界面，是可以修改的。")]),t._v(" "),e("p",[t._v("那plsql到底是怎么实现的？一起来看下：")]),t._v(" "),e("p",[t._v("选中序列--》右键--》编辑")]),t._v(" "),e("p",[t._v("第一步：修改起始值；")]),t._v(" "),e("p",[t._v("第二步：点击右下角的“查看SQL”。")]),t._v(" "),e("p",[t._v("说明：")]),t._v(" "),e("p",[t._v("起初，这里的起始值是300，我给它改成了30，实现的效果就是：")]),t._v(" "),e("p",[t._v("将序列的下一个值改成了30，以后序列将会从30往后叠加。")]),t._v(" "),e("p",[t._v("然后，看下面这张图，要实现序列起始值的修改，需要3步。")]),t._v(" "),e("p",[t._v("第一步：更改序列的步长；")]),t._v(" "),e("p",[t._v("alter sequence SEQ_META_THEME_TABLE increment by -271 nocache;")]),t._v(" "),e("p",[t._v("我们需要明白一个前提：")]),t._v(" "),e("p",[t._v("序列的值是怎么来的？")]),t._v(" "),e("p",[t._v("当前值+步长（增量）")]),t._v(" "),e("p",[t._v("所以，我们想要修改序列的当前值，就必须自改序列的增量。")]),t._v(" "),e("p",[t._v("第二步：查询序列值；")]),t._v(" "),e("p",[t._v("select SEQ_META_THEME_TABLE.nextval from dual;")]),t._v(" "),e("p",[t._v("这一步的目的是：改变序列的当前值，让其按照自己预设的增量来完成序列当前值的修改工作。")]),t._v(" "),e("p",[t._v("到这一步，该序列返回的当前值已经改成了300-271=29（下次调用将会返回30）。")]),t._v(" "),e("p",[t._v("第三步：将序列的增量改成1。")]),t._v(" "),e("p",[t._v("alter sequence SEQ_META_THEME_TABLE increment by 1 cache 20;")]),t._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- Modify the last number ")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("alter")]),t._v(" sequence SEQ_META_THEME_TABLE increment "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("271")]),t._v(" nocache"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" SEQ_META_THEME_TABLE"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nextval "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" dual"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("alter")]),t._v(" sequence SEQ_META_THEME_TABLE increment "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" cache "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("不信？我们把SQL复制出来，执行一下。")]),t._v(" "),e("p",[t._v("把序列值变大（30--\x3e300）")]),t._v(" "),e("p",[t._v("关于增量的计算：")]),t._v(" "),e("p",[t._v("如果更改后值(afterNum)>现在序列的下一个值(nextNum)，增量(step)=afterNum - nextNum；")]),t._v(" "),e("p",[t._v("如果更改后值(afterNum)<现在序列的下一个值(nextNum)，增量(step)=afterNum - nextNum - 1；")]),t._v(" "),e("h2",{attrs:{id:"参考文章"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),e("p",[e("a",{attrs:{href:"http://www.manongjc.com/detail/28-blnqrnlyhtnlqul.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Oracle 修改序列的当前值的3种方式"),e("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=_.exports}}]);