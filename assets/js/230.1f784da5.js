(window.webpackJsonp=window.webpackJsonp||[]).push([[230],{607:function(a,s,t){"use strict";t.r(s);var e=t(26),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"centosmysql安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centosmysql安装"}},[a._v("#")]),a._v(" CentosMySQL安装")]),a._v(" "),t("h2",{attrs:{id:"_1-具体步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-具体步骤"}},[a._v("#")]),a._v(" 1. 具体步骤")]),a._v(" "),t("h3",{attrs:{id:"_1-1-检查系统是否安装了mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-检查系统是否安装了mysql"}},[a._v("#")]),a._v(" 1.1 检查系统是否安装了MySQL")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("rpm -qa | grep mysql\n")])])]),t("p",[a._v("返回空，说明没有安装")]),a._v(" "),t("h3",{attrs:{id:"_1-2-下载安装包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-下载安装包"}},[a._v("#")]),a._v(" 1.2 下载安装包")]),a._v(" "),t("h3",{attrs:{id:"_1-2-1-下载mariadb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-下载mariadb"}},[a._v("#")]),a._v(" 1.2.1 下载Mariadb")]),a._v(" "),t("p",[a._v("Cenntos-7 默认下载的是MariaDB,所以执行下面的命令下载到的是MariaDB")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("yum install mysql\n")])])]),t("p",[a._v("删除")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("yum remove mysql\n")])])]),t("p",[a._v("如需彻底删除，参考")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://www.jianshu.com/p/ef58fb333cd6",target:"_blank",rel:"noopener noreferrer"}},[a._v("Centos7 完全卸载mysql"),t("OutboundLink")],1)]),a._v(" "),t("h3",{attrs:{id:"_1-2-2-下载mysql的repo-源-mysql-5-7"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-下载mysql的repo-源-mysql-5-7"}},[a._v("#")]),a._v(" 1.2.2 下载mysql的repo 源（MySQL 5.7）")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("wget http://repo.mysql.com/mysql57-community-release-el7-9.noarch.rpm\n")])])]),t("p",[a._v("安装mysql57-community-release-el7-9.noarch.rpm包")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("sudo rpm -ivh mysql57-community-release-el7-9.noarch.rpm\n")])])]),t("p",[a._v("安装这个包后，在/etc/yum.repos.d/下 会获得两个mysql 的yum repo源")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190908212717751.png",alt:"image-20190908212717751"}})]),a._v(" "),t("h3",{attrs:{id:"_1-3-安装mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-安装mysql"}},[a._v("#")]),a._v(" 1.3 安装MySQL")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("sudo yum install mysql-server\n")])])]),t("p",[a._v("根据提示安装")]),a._v(" "),t("h4",{attrs:{id:"_1-3-1-检查安装是否成功"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-1-检查安装是否成功"}},[a._v("#")]),a._v(" 1.3.1 检查安装是否成功")]),a._v(" "),t("p",[a._v("执行")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v(" rpm -qa |grep mysql\n")])])]),t("p",[a._v("看到如下返回，证明安装成功了")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190908214919885.png",alt:"image-20190908214919885"}})]),a._v(" "),t("h3",{attrs:{id:"_1-4-登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-登录"}},[a._v("#")]),a._v(" 1.4 登录")]),a._v(" "),t("p",[a._v("安装完成后，没有密码，需要重置密码")]),a._v(" "),t("p",[a._v("重置前需要登录")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("mysql -u root\n")])])]),t("h4",{attrs:{id:"_1-4-1-登录异常一"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-1-登录异常一"}},[a._v("#")]),a._v(" 1.4.1 登录异常一")]),a._v(" "),t("p",[a._v("ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)")]),a._v(" "),t("p",[t("RouterLink",{attrs:{to:"/db/mysql/install/Mysql安装后登录异常tmysqlsock.html"}},[a._v("参考文章")])],1),a._v(" "),t("h4",{attrs:{id:"_1-4-2-登录异常2-默认密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-2-登录异常2-默认密码"}},[a._v("#")]),a._v(" 1.4.2 登录异常2(默认密码)")]),a._v(" "),t("p",[a._v("Access denied for user 'root'@'localhost' (using password: NO)")]),a._v(" "),t("p",[a._v("查找默认密码")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('grep "temporary password" /var/log/mysqld.log\n')])])]),t("p",[a._v("返回结果最后冒号后面的字符串就是root的默认密码。")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('[root@iZwz97t3ru69kye3l7uj70Z lib]# grep "temporary password" /var/log/mysqld.log\n2019-09-08T13:57:32.059634Z 1 [Note] A temporary password is generated for root@localhost: xUu<ts%uO5gq\n')])])]),t("h3",{attrs:{id:"_1-5-重置密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-重置密码"}},[a._v("#")]),a._v(" 1.5 重置密码")]),a._v(" "),t("p",[a._v("使用默认密码登录")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("mysql -u root -p\n")])])]),t("p",[a._v("设置密码")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("SET PASSWORD = PASSWORD('123456');\n")])])]),t("p",[a._v("重启之后才生效")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("exit;\nservice mysqld restart\n")])])]),t("h4",{attrs:{id:"_1-5-1-重置异常1"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-1-重置异常1"}},[a._v("#")]),a._v(" 1.5.1  重置异常1")]),a._v(" "),t("p",[a._v("提示：")]),a._v(" "),t("p",[a._v("ERROR 1819 (HY000): Your password does not satisfy the current policy requirements")]),a._v(" "),t("p",[a._v("密码强度不足,执行")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v(" set global validate_password_policy=0;\n")])])]),t("h3",{attrs:{id:"_1-6-数据库编码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-数据库编码"}},[a._v("#")]),a._v(" 1.6 数据库编码")]),a._v(" "),t("p",[a._v("查看数据库编码格式")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('show variables like "%char%";\n')])])]),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190908222908251.png",alt:"image-20190908222908251"}})]),a._v(" "),t("p",[a._v("修改编码,在")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("vim /etc/my.cnf\n")])])]),t("p",[a._v("新增服务端默认字符集")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("[mysqld]\n# 服务端使用的字符集默认为UTF8\ncharacter-set-server=utf8\n")])])]),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210219161142953.png",alt:"image-20210219161142953"}})]),a._v(" "),t("h3",{attrs:{id:"参考文章"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[a._v("#")]),a._v(" 参考文章")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/a774630093/article/details/79270080",target:"_blank",rel:"noopener noreferrer"}},[a._v("CentOS7 64位安装mysql教程"),t("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=r.exports}}]);