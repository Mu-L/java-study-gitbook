(window.webpackJsonp=window.webpackJsonp||[]).push([[181],{557:function(a,t,s){"use strict";s.r(t);var e=s(26),_=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"达梦数据库-控制台工具-备份-恢复"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#达梦数据库-控制台工具-备份-恢复"}},[a._v("#")]),a._v(" 达梦数据库-控制台工具（备份，恢复）")]),a._v(" "),s("h2",{attrs:{id:"_1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-概述"}},[a._v("#")]),a._v(" 1. 概述")]),a._v(" "),s("p",[a._v("DM控制台工具是管理和维护数据库的基本工具。因为控制台是通过dm.ini 参数来连接实例的，所以该工具必须在DM 实例服务端运行。 无法向DM Manager 工具和 DM Monitor 那样远程连接。")]),a._v(" "),s("ul",[s("li",[a._v("Windows 平台直接在程序里调用控制台工具来启动。")]),a._v(" "),s("li",[a._v("Linux 平台，执行DM_HOME/tool/console 启动。")])]),a._v(" "),s("h2",{attrs:{id:"_2-用控制台工具可以提供如下功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-用控制台工具可以提供如下功能"}},[a._v("#")]),a._v(" 2. 用控制台工具可以提供如下功能")]),a._v(" "),s("ul",[s("li",[a._v("服务器参数配置")]),a._v(" "),s("li",[a._v("脱机备份与还原")]),a._v(" "),s("li",[a._v("查看系统信息")]),a._v(" "),s("li",[a._v("查看许可证信息")])]),a._v(" "),s("h2",{attrs:{id:"_3-实例参数查看和修改"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-实例参数查看和修改"}},[a._v("#")]),a._v(" 3. 实例参数查看和修改")]),a._v(" "),s("p",[a._v("在控制台工具中配置好实例后，可以直接查看和修改实例的参数。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210629184434337.png",alt:"image-20210629184434337"}})]),a._v(" "),s("h2",{attrs:{id:"_4-备份恢复实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-备份恢复实例"}},[a._v("#")]),a._v(" 4. 备份恢复实例")]),a._v(" "),s("p",[a._v("DM实例的备份恢复可以通过命令行，DM Manager 工具来进行，")]),a._v(" "),s("ul",[s("li",[a._v("注意DM Manager 中仅支持备份，不支持恢复。")]),a._v(" "),s("li",[a._v("这里的控制台空间是可以同时支持备份和恢复操作的。")])]),a._v(" "),s("p",[a._v("控制台支持如下操作：")]),a._v(" "),s("ul",[s("li",[a._v("1)备份还原")]),a._v(" "),s("li",[a._v("2)新建备份")]),a._v(" "),s("li",[a._v("3)设置默认备份目录")]),a._v(" "),s("li",[a._v("4)指定归档文件还原")]),a._v(" "),s("li",[a._v("5)还原备份")]),a._v(" "),s("li",[a._v("6)备份属性")]),a._v(" "),s("li",[a._v("7)备份列表弹出菜单")])]),a._v(" "),s("h3",{attrs:{id:"_4-1-备份"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-备份"}},[a._v("#")]),a._v(" 4.1 备份")]),a._v(" "),s("blockquote",[s("p",[a._v("脱机备份，需关闭当前实例的服务")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210629184557627.png",alt:"image-20210629184557627"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210629184557627.png",alt:""}})]),a._v(" "),s("h3",{attrs:{id:"_4-2-还原"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-还原"}},[a._v("#")]),a._v(" 4.2 还原")]),a._v(" "),s("blockquote",[s("p",[a._v("脱机还原，需关闭当前实例的服务")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210629184854266.png",alt:"image-20210629184854266"}})]),a._v(" "),s("h4",{attrs:{id:"_4-2-1-dm8-还需要更新db-magic"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-dm8-还需要更新db-magic"}},[a._v("#")]),a._v(" 4.2.1 DM8 还需要更新DB_magic")]),a._v(" "),s("p",[a._v("DM8使用DMRMAN工具备份还原恢复后，需要启动数据库服务，才能正常运行数据库。但是如果直接启动数据库服务，会报以下错误")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("Instance DMSERVER startup failed, execute 'recover database ... update db_magic' in dmrman.\n")])])]),s("p",[a._v("原因是DM8比DM7多出了一步更新db_magic的步骤，若不执行该步骤则会报以上错误，且无法直接启动数据库服务。")]),a._v(" "),s("p",[a._v("更新db_magic语法:")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("方式1：recover database ‘/home/dmdba/dmdbms/data/TEST/dm.ini’ update db_magic;")])]),a._v(" "),s("li",[s("p",[a._v("方式2：界面操作")])])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210629191451696.png",alt:"image-20210629191451696"}})]),a._v(" "),s("p",[a._v("更新完db_magic后即可启动数据库服务")]),a._v(" "),s("h2",{attrs:{id:"_5-可能遇到的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-可能遇到的问题"}},[a._v("#")]),a._v(" 5. 可能遇到的问题")]),a._v(" "),s("h3",{attrs:{id:"_5-1-信号量异常"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-信号量异常"}},[a._v("#")]),a._v(" 5.1 信号量异常")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210629192030430.png",alt:"image-20210629192030430"}})]),a._v(" "),s("p",[a._v("脱机备份还原，需关闭当前实例的服务")]),a._v(" "),s("h2",{attrs:{id:"参考文章"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[a._v("#")]),a._v(" 参考文章")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://www.cndba.cn/dave/article/3842",target:"_blank",rel:"noopener noreferrer"}},[a._v("DM 达梦数据库 控制台工具（console） 使用说明"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/weixin_42316663/article/details/107682674",target:"_blank",rel:"noopener noreferrer"}},[a._v("达梦8数据库还原恢复后开启数据库服务报Instance DMSERVICETEST startup failed错误"),s("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=_.exports}}]);