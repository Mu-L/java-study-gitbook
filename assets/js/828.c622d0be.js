(window.webpackJsonp=window.webpackJsonp||[]).push([[828],{1205:function(s,a,e){"use strict";e.r(a);var r=e(26),t=Object(r.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"redis安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis安装"}},[s._v("#")]),s._v(" Redis安装")]),s._v(" "),e("h2",{attrs:{id:"_1-具体安装步骤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-具体安装步骤"}},[s._v("#")]),s._v(" 1. 具体安装步骤")]),s._v(" "),e("h3",{attrs:{id:"_1-1-使用wget命令下载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-使用wget命令下载"}},[s._v("#")]),s._v(" 1.1 使用wget命令下载")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("wget http://download.redis.io/releases/redis-5.0.5.tar.gz\n")])])]),e("p",[s._v("具体下载哪个版本可以在"),e("a",{attrs:{href:"http://download.redis.io/releases/",target:"_blank",rel:"noopener noreferrer"}},[s._v("redis官网"),e("OutboundLink")],1),s._v("上选择")]),s._v(" "),e("h3",{attrs:{id:"_1-2-解压源码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-解压源码"}},[s._v("#")]),s._v(" 1.2 解压源码")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("tar -zxvf redis-5.0.5.tar.gz\n")])])]),e("h3",{attrs:{id:"_1-3-编译"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-编译"}},[s._v("#")]),s._v(" 1.3 编译")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cd /usr/local/redis-5.0.5\nmake PREFIX=/usr/local/redis install\n")])])]),e("p",[s._v("编译后的redis在 "),e("code",[s._v("/usr/local/redis")]),s._v("目录下")]),s._v(" "),e("h4",{attrs:{id:"_1-3-1-如遇安装异常cc-command-not-found"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-1-如遇安装异常cc-command-not-found"}},[s._v("#")]),s._v(" 1.3.1 如遇安装异常cc: command not found")]),s._v(" "),e("p",[s._v("/bin/sh: cc: command not found")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20191203115107725.png",alt:"image-20191203115107725"}})]),s._v(" "),e("p",[s._v("**解决方案：**安装gcc命令")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("yum install gcc\n")])])]),e("h4",{attrs:{id:"_1-3-2-make时报如下错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-2-make时报如下错误"}},[s._v("#")]),s._v(" 1.3.2 make时报如下错误")]),s._v(" "),e("p",[s._v("原因是jemalloc重载了Linux下的ANSI C的malloc和free函数。解决办法：make时添加参数。")]),s._v(" "),e("h3",{attrs:{id:"_1-4-redis的配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-redis的配置文件"}},[s._v("#")]),s._v(" 1.4 redis的配置文件")]),s._v(" "),e("p",[s._v("redis.conf是redis的配置文件，redis.conf在redis源码目录。\n拷贝配置文件到安装目录下\n进入源码目录，里面有一份配置文件 redis.conf，然后将其拷贝到安装路径下")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cp redis.conf /usr/local/redis/bin/\n")])])]),e("h2",{attrs:{id:"_2-bin目录结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-bin目录结构"}},[s._v("#")]),s._v(" 2. bin目录结构")]),s._v(" "),e("p",[s._v("进入安装目录bin下")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cd /usr/local/redis/bin\n")])])]),e("p",[s._v("目录结构")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190909112349183.png",alt:"image-20190909112349183"}})]),s._v(" "),e("ul",[e("li",[s._v("redis-benchmark: redis 性能检测工具")]),s._v(" "),e("li",[s._v("redis-check-aof： AOF文件修复工具")]),s._v(" "),e("li",[s._v("redis-check-rdb： RDB文件修复工具")]),s._v(" "),e("li",[s._v("redis-cli：  客户端命令行")]),s._v(" "),e("li",[s._v("redis.conf：  redis配置文件")]),s._v(" "),e("li",[s._v("redis-sentinel： redis集群")]),s._v(" "),e("li",[s._v("redis-server： redis 服务进程")])]),s._v(" "),e("h2",{attrs:{id:"_3-启动redis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-启动redis"}},[s._v("#")]),s._v(" 3. 启动redis")]),s._v(" "),e("h3",{attrs:{id:"_3-1-前端模式启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-前端模式启动"}},[s._v("#")]),s._v(" 3.1 前端模式启动")]),s._v(" "),e("p",[s._v("直接运行redis-server将以前端模式启动")]),s._v(" "),e("p",[e("strong",[s._v("缺点")]),s._v("：ssh命令窗口关闭则redis-server程序结束，"),e("strong",[s._v("不推荐")])]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("./redis-server\n")])])]),e("p",[s._v("如图")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190909112943727.png",alt:"image-20190909112943727"}})]),s._v(" "),e("h3",{attrs:{id:"_3-2-后端模式启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-后端模式启动"}},[s._v("#")]),s._v(" 3.2 后端模式启动")]),s._v(" "),e("p",[s._v("修改redis.conf 配置文件。daemonize yes 以后端模式启动")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("vim /usr/local/redis/bin/redis.conf\n")])])]),e("p",[e("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190909113153794.png",alt:"image-20190909113153794"}})]),s._v(" "),e("p",[s._v("执行如下命令")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 相对路径情况执行\n./redis-server redis.conf\n\n# 全路径执行\n/usr/local/redis/bin/redis-server /usr/local/redis/bin/redis.conf\n")])])]),e("p",[e("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190909114017734.png",alt:"image-20190909114017734"}})]),s._v(" "),e("h2",{attrs:{id:"_4-连接redis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-连接redis"}},[s._v("#")]),s._v(" 4. 连接redis")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("/usr/local/redis/bin/redis-cli\n")])])]),e("h2",{attrs:{id:"_5-关闭redis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-关闭redis"}},[s._v("#")]),s._v(" 5.关闭redis")]),s._v(" "),e("p",[s._v("强行终止redis进程可能会导致redis持久化数据丢失。正确停止Redis的方式应该是向Redis发送SHUTDOWN命令，命令为：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cd /usr/local/redis\n./bin/redis-cli shutdown\n")])])]),e("h3",{attrs:{id:"_5-1-强行终止redis-不推荐"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-强行终止redis-不推荐"}},[s._v("#")]),s._v(" 5.1 强行终止redis(不推荐)")]),s._v(" "),e("p",[s._v("会造成数据丢失")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("pkill redis-server\n")])])]),e("h2",{attrs:{id:"_6-开机自启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-开机自启动"}},[s._v("#")]),s._v(" 6. 开机自启动")]),s._v(" "),e("p",[s._v("在"),e("code",[s._v("/etc/rc.local")]),s._v("编辑")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("vim /etc/rc.local\n")])])]),e("p",[s._v("添加")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# redis 开机自启动\n/usr/local/redis/bin/redis-server /usr/local/redis/etc/redis-conf\n")])])])])}),[],!1,null,null,null);a.default=t.exports}}]);