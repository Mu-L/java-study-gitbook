(window.webpackJsonp=window.webpackJsonp||[]).push([[790],{1166:function(t,s,a){"use strict";a.r(s);var r=a(26),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"lxml入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lxml入门"}},[t._v("#")]),t._v(" lxml入门")]),t._v(" "),a("h2",{attrs:{id:"_1-简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-简介"}},[t._v("#")]),t._v(" 1. 简介")]),t._v(" "),a("p",[t._v("lxml 是一个流行的解析库，使用Xpath语法")]),t._v(" "),a("h2",{attrs:{id:"_2-xpath常用语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-xpath常用语法"}},[t._v("#")]),t._v(" 2. Xpath常用语法")]),t._v(" "),a("p",[t._v("XPath 使用路径表达式在 XML 文档中选取节点。节点是通过沿着路径或者 step 来选取的。")]),t._v(" "),a("h3",{attrs:{id:"_2-1-选取节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-选取节点"}},[t._v("#")]),t._v(" 2.1 选取节点")]),t._v(" "),a("p",[t._v("下面列出了最有用的路径表达式：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("表达式")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("nodename")]),t._v(" "),a("td",[t._v("选取此节点的所有子节点。")])]),t._v(" "),a("tr",[a("td",[t._v("/")]),t._v(" "),a("td",[t._v("从根节点选取。")])]),t._v(" "),a("tr",[a("td",[t._v("//")]),t._v(" "),a("td",[t._v("从匹配选择的当前节点选择文档中的节点，而不考虑它们的位置。")])]),t._v(" "),a("tr",[a("td",[t._v(".")]),t._v(" "),a("td",[t._v("选取当前节点。")])]),t._v(" "),a("tr",[a("td",[t._v("..")]),t._v(" "),a("td",[t._v("选取当前节点的父节点。")])]),t._v(" "),a("tr",[a("td",[t._v("@")]),t._v(" "),a("td",[t._v("选取属性。")])])])]),t._v(" "),a("p",[t._v("XPath 通配符可用来选取未知的 XML 元素。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("通配符")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("*")]),t._v(" "),a("td",[t._v("匹配任何元素节点。")])]),t._v(" "),a("tr",[a("td",[t._v("@*")]),t._v(" "),a("td",[t._v("匹配任何属性节点。")])]),t._v(" "),a("tr",[a("td",[t._v("node()")]),t._v(" "),a("td",[t._v("匹配任何类型的节点。")])])])]),t._v(" "),a("p",[t._v("通过在路径表达式中使用“|”运算符，可以选取若干个路径，“|”两边的表达式是互相独立的，并非是一个表达式下。")]),t._v(" "),a("h4",{attrs:{id:"_2-2-谓语"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-谓语"}},[t._v("#")]),t._v(" 2.2 "),a("strong",[t._v("谓语")])]),t._v(" "),a("p",[t._v("通过以上介绍我们基本可以进行选取节点了，但是有可能选的节点有点多，那么这时候就需要用谓语了。谓语就是用来做过滤的，过滤条件均写在"),a("code",[t._v("[]")]),t._v("中。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("路径表达式")]),t._v(" "),a("th",[t._v("结果")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("/bookstore/book[1]")]),t._v(" "),a("td",[t._v("选取属于 bookstore 子元素的第一个 book 元素。")])]),t._v(" "),a("tr",[a("td",[t._v("/bookstore/book[last()]")]),t._v(" "),a("td",[t._v("选取属于 bookstore 子元素的最后一个 book 元素。")])]),t._v(" "),a("tr",[a("td",[t._v("/bookstore/book[last()-1]")]),t._v(" "),a("td",[t._v("选取属于 bookstore 子元素的倒数第二个 book 元素。")])]),t._v(" "),a("tr",[a("td",[t._v("/bookstore/book[position()❤️]")]),t._v(" "),a("td",[t._v("选取最前面的两个属于 bookstore 元素的子元素的 book 元素。")])]),t._v(" "),a("tr",[a("td",[t._v("//title[@lang]")]),t._v(" "),a("td",[t._v("选取所有拥有名为 lang 的属性的 title 元素。")])]),t._v(" "),a("tr",[a("td",[t._v("//title[@lang='eng']")]),t._v(" "),a("td",[t._v("选取所有 title 元素，且这些元素拥有值为 eng 的 lang 属性。")])]),t._v(" "),a("tr",[a("td",[t._v("/bookstore/book[price>35.00]")]),t._v(" "),a("td",[t._v("选取 bookstore 元素的所有 book 元素，且其中的 price 元素的值须大于 35.00。")])]),t._v(" "),a("tr",[a("td",[t._v("/bookstore/book[price>35.00]/title")]),t._v(" "),a("td",[t._v("选取 bookstore 元素中的 book 元素的所有 title 元素，且其中的 price 元素的值须大于 35.00。")])])])]),t._v(" "),a("h2",{attrs:{id:"_3-lxml用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-lxml用法"}},[t._v("#")]),t._v(" 3. lxml用法")]),t._v(" "),a("h3",{attrs:{id:"_3-1-初步使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-初步使用"}},[t._v("#")]),t._v(" 3.1 初步使用")]),t._v(" "),a("p",[t._v("利用他解析Html代码")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" lxml "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" etree\ntext "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('\'\'\'\n<div>\n    <ul>\n         <li class="item-0"><a href="link1.html">first item</a></li>\n         <li class="item-1"><a href="link2.html">second item</a></li>\n         <li class="item-inactive"><a href="link3.html">third item</a></li>\n         <li class="item-1"><a href="link4.html">fourth item</a></li>\n         <li class="item-0"><a href="link5.html">fifth item</a>\n     </ul>\n </div>\n\'\'\'')]),t._v("\nhtml "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" etree"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HTML"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nresult "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" etree"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tostring"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[t._v("使用 lxml 的 etree 库")]),t._v(" "),a("li",[t._v("利用 etree.HTML 初始化")]),t._v(" "),a("li",[t._v("最后将其打印出来")])]),t._v(" "),a("p",[t._v("里体现了 lxml 的一个非常实用的功能就是自动修正 html 代码，大家应该注意到了，最后一个 li 标签，其实我把尾标签删掉了，是不闭合的。不过，lxml 因为继承了 libxml2 的特性，具有自动修正 HTML 代码的功能。 所以输出结果是这样的")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item-0"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a href"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"link1.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("first item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item-1"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a href"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"link2.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("second item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item-inactive"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a href"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"link3.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("third item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item-1"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a href"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"link4.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("fourth item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item-0"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a href"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"link5.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("fifth item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("不仅补全了 li 标签，还添加了 body，html 标签。")]),t._v(" "),a("h3",{attrs:{id:"_3-2-文件读取"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-文件读取"}},[t._v("#")]),t._v(" 3.2 文件读取")]),t._v(" "),a("p",[t._v("除了直接读取字符串，还支持从文件读取内容。比如我们新建一个文件叫做 hello.html，内容为")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item-0"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a href"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"link1.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("first item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item-1"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a href"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"link2.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("second item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item-inactive"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a href"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"link3.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("span "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bold"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("third item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("span"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item-1"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a href"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"link4.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("fourth item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item-0"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a href"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"link5.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("fifth item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("利用 parse 方法来读取文件。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("from lxml import etree\nhtml = etree.parse('hello.html')\nresult = etree.tostring(html, pretty_print=True)\nprint(result)\n")])])]),a("p",[t._v("同样可以得到相同的结果。")]),t._v(" "),a("h3",{attrs:{id:"_3-3-xpath-实例测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-xpath-实例测试"}},[t._v("#")]),t._v(" 3.3 XPath 实例测试")]),t._v(" "),a("p",[t._v("依然以上一段程序为例 （1）")]),t._v(" "),a("h4",{attrs:{id:"_3-3-1-获取所有的标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-1-获取所有的标签"}},[t._v("#")]),t._v(" 3.3.1 获取所有的标签")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('from lxml import etree\nhtml = etree.parse(\'hello.html\')\nprint ("type(html):     "+str(type(html)))\nresult = html.xpath(\'//li\')\nprint ("result:     "+str(result))\nprint ("len(result):    "+str(len(result)))\nprint ("type(result):   "+str(type(result)))\nprint ("type(result[0]):    "+str(type(result[0])))\n')])])]),a("p",[t._v("运行结果")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lxml.etree._ElementTree'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nresult"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Element li at "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x56b8e80")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Element li at "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x562d6c0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Element li at "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x56dab80")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Element li at "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x56dabc0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Element li at "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x56dac00")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'list'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lxml.etree._Element'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("可见，etree.parse 的类型是 ElementTree，通过调用 xpath 以后，得到了一个列表，包含了 5 个元素，每个元素都是 Element 类型")]),t._v(" "),a("h4",{attrs:{id:"_3-3-2-获取标签所有的class"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-2-获取标签所有的class"}},[t._v("#")]),t._v(" 3.3.2 获取标签所有的class")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("result = html.xpath('//li/@class')\nprint(result )\n")])])]),a("p",[t._v("运行结果")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("['item-0', 'item-1', 'item-inactive', 'item-1', 'item-0']\n")])])]),a("h4",{attrs:{id:"_3-3-3-获取标签下href-为link1-html-的-标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-3-获取标签下href-为link1-html-的-标签"}},[t._v("#")]),t._v(" 3.3.3 获取标签下href 为link1.html 的 标签")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("result = html.xpath('//li/a[@href=\"link1.html\"]')\nprint(result )\n")])])]),a("p",[t._v("运行结果")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[<Element a at 0x5587b00>]\n")])])]),a("h4",{attrs:{id:"_3-3-4-获取标签下的所有-标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-4-获取标签下的所有-标签"}},[t._v("#")]),t._v(" 3.3.4 获取标签下的所有 标签")]),t._v(" "),a("p",[a("strong",[t._v("错误写法")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("result = html.xpath('//li/span')\n")])])]),a("p",[t._v("因为 / 是用来获取子元素的，这样获取得为空数组。所以要用双斜杠")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("result = html.xpath('//li//span')\nprint(result )\n")])])]),a("p",[t._v("运行结果")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[<Element span at 0x5636d80>]\n")])])]),a("h4",{attrs:{id:"_3-3-5-获取最后一个href"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-5-获取最后一个href"}},[t._v("#")]),t._v(" 3.3.5 获取最后一个href")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("result = html.xpath('//li[last()]/a/@href')print result\n")])])]),a("p",[t._v("运行结果：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("['link5.html']\n")])])]),a("h4",{attrs:{id:"_3-3-6-获取倒数第二个元素的内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-6-获取倒数第二个元素的内容"}},[t._v("#")]),t._v(" 3.3.6 获取倒数第二个元素的内容")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("result = html.xpath('//li[last()-1]/a')\nprint result[0].text\n\n")])])]),a("p",[t._v("运行结果")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("fourth item\n\n")])])]),a("h4",{attrs:{id:"_3-3-7-获取-class-为-bold-的标签名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-7-获取-class-为-bold-的标签名"}},[t._v("#")]),t._v(" 3.3.7 获取 class 为 bold 的标签名")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("result = html.xpath('//*[@class=\"bold\"]')\nprint result[0].tag\n")])])]),a("p",[t._v("运行结果")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("span\n")])])]),a("h2",{attrs:{id:"参考文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://cuiqingcai.com/2621.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Python 爬虫利器三之 Xpath 语法与 lxml 库的用法"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/e084c2b2b66d",target:"_blank",rel:"noopener noreferrer"}},[t._v("lxml 学习笔记"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);