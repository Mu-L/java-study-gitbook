(window.webpackJsonp=window.webpackJsonp||[]).push([[364],{742:function(t,a,s){"use strict";s.r(a);var e=s(26),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"dynamicinsert和-dynamicupdate生成动态sql语句"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dynamicinsert和-dynamicupdate生成动态sql语句"}},[t._v("#")]),t._v(" @DynamicInsert和@DynamicUpdate生成动态SQL语句")]),t._v(" "),s("h2",{attrs:{id:"_1-简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-简介"}},[t._v("#")]),t._v(" 1. 简介")]),t._v(" "),s("p",[t._v("@DynamicUpdate@DynamicInsert 是hibernate里面的注解")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("@DynamicInsert属性:")])]),t._v(" "),s("p",[t._v("设置为true,设置为true,表示insert对象的时候,生成动态的insert语句,如果这个字段的值是null就不会加入到insert语句当中.默认false。")]),t._v(" "),s("blockquote",[s("p",[t._v("比如希望数据库插入日期或时间戳字段时，在对象字段为空的情况下，表字段能自动填写当前的sysdate。")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("@DynamicUpdate属性")]),t._v(":")]),t._v(" "),s("p",[t._v("设置为true,设置为true,表示update对象的时候,生成动态的update语句,如果这个字段的值是null就不会被加入到update语句中,默认false。")]),t._v(" "),s("blockquote",[s("p",[t._v("比如只想更新某个属性，但是却把整个对象的属性都更新了，这并不是我们希望的结果，我们希望的结果是：我更改了哪些字段，只要更新我修改的字段就够了。")])])])]),t._v(" "),s("h2",{attrs:{id:"_2-举例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-举例"}},[t._v("#")]),t._v(" 2. 举例")]),t._v(" "),s("h3",{attrs:{id:"_2-1-动态插入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-动态插入"}},[t._v("#")]),t._v(" 2.1 动态插入")]),t._v(" "),s("p",[s("strong",[t._v("@DynamicInsert注解下Hibernate日志打印SQL：")])]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" Cat "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cat_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("?"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ?"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n")])])]),s("p",[t._v("反之")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" Cat "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("create_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" update_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cat_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("?"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ?"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ?"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ?"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n")])])]),s("h3",{attrs:{id:"_2-2-动态更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-动态更新"}},[t._v("#")]),t._v(" 2.2 动态更新")]),t._v(" "),s("p",[t._v("@DynamicUpdate注解下Hibernate日志打印SQL：")]),t._v(" "),s("p",[t._v("说明：如果字段有更新，Hibernate才会对该字段进行更新")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),t._v(" Cat "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" update_time"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("? "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("?\n")])])]),s("p",[t._v("反之Cat实体类去掉@DynamicUpdate")]),t._v(" "),s("p",[t._v("说明：不管字段有没有更新，Hibernate都会对该字段进行更新")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),t._v(" Cat "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" update_time"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("?"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cat_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("? "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("?  \n")])])]),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结:")]),t._v(" "),s("p",[t._v("如果不需要全表更新就加上@DynamicInsert和@DynamicUpdate")]),t._v(" "),s("h2",{attrs:{id:"参考文章"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/itguangit/article/details/78696767",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spring Data JPA注解@DynamicInsert和@DynamicUpdate"),s("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);