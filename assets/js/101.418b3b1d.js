(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{481:function(s,a,t){"use strict";t.r(a);var i=t(26),e=Object(i.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"dns域名解析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns域名解析"}},[s._v("#")]),s._v(" DNS域名解析")]),s._v(" "),t("h2",{attrs:{id:"_1-dns是什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-dns是什么"}},[s._v("#")]),s._v(" 1. DNS是什么？")]),s._v(" "),t("p",[s._v("DNS（Domain Namo System，域名解析系统）的作用非常简单，就是根据"),t("strong",[s._v("域名查出ip地址")]),s._v("（可以想象成一本巨大的电话本）")]),s._v(" "),t("p",[s._v("例如：你要访问"),t("code",[s._v("www.baidu.com")]),s._v(" 那么首先要通过DNS查出他的ip地址是14.215.177.38")]),s._v(" "),t("h2",{attrs:{id:"_2-查询过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-查询过程"}},[s._v("#")]),s._v(" 2. 查询过程")]),s._v(" "),t("p",[s._v("虽然只需要返回一个IP地址，但是DNS的查询过程非常复杂，分成多个步骤")]),s._v(" "),t("p",[s._v("dig命令可以显示整个查询过程,在终端输入")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("dig www.baidu.com\n")])])]),t("p",[s._v("会输出以下内容")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190824211111182.png",alt:"image-20190824211111182"}})]),s._v(" "),t("ul",[t("li",[s._v("第一段是查询参数和统计")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190824211248412.png",alt:"image-20190824211248412"}})]),s._v(" "),t("ul",[t("li",[s._v("第二段是查询内容")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190824211311373.png",alt:"image-20190824211311373"}})]),s._v(" "),t("p",[s._v("上面的结果表示，查询域名"),t("code",[s._v("www.baidu.com")]),s._v(" 的A记录，A是address的缩写")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("第三段是DNS服务器的答复")]),s._v(" "),t("p",[t("code",[s._v("www.baidu.com")]),s._v("被cname到了"),t("code",[s._v("www.a.shifen.com")])])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190824211459211.png",alt:"image-20190824211459211"}})]),s._v(" "),t("p",[s._v("上面的结果显示，"),t("code",[s._v("www.baidu.com")]),s._v(" 有三个A记录，既三个ip地址。600是TTL值（Time to live的缩写），表示缓存时间，既600秒之内不用重新查询")]),s._v(" "),t("ul",[t("li",[s._v("第四段显示"),t("code",[s._v("www.a.shifen.com")]),s._v(" 的NS记录（Name Service），既哪些服务器负责管路"),t("code",[s._v("www.a.shifen.com")]),s._v(" 的DNS记录")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190824211915750.png",alt:"image-20190824211915750"}})]),s._v(" "),t("p",[s._v("上面的结果显示a.shifen.com共有五条NS记录，既五域名服务器，向其中任一台查询都能知道a.shifen.com 的ip地址是什么")]),s._v(" "),t("ul",[t("li",[s._v("第五段是上面5个域名服务器的ip地址，这是随着前一段一起返回的")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190824212924233.png",alt:"image-20190824212924233"}})]),s._v(" "),t("ul",[t("li",[s._v("第六段是dns服务器的一些传输信息")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190824213456662.png",alt:"image-20190824213456662"}})]),s._v(" "),t("p",[s._v("上面的结果显示，本机的DNS服务器是218.168.1.253，查询端口是53（dns服务器的默认端口），以及回应长度是260字节")]),s._v(" "),t("h3",{attrs:{id:"_2-1-简化-short"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-简化-short"}},[s._v("#")]),s._v(" 2.1 简化+short")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190824213808554.png",alt:"image-20190824213808554"}})]),s._v(" "),t("p",[s._v("上面命令值返回"),t("code",[s._v("www.baidu.com")]),s._v(" 对应的3个ip地址")]),s._v(" "),t("h2",{attrs:{id:"_3-dns-的记录类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-dns-的记录类型"}},[s._v("#")]),s._v(" 3.DNS 的记录类型")]),s._v(" "),t("p",[s._v("域名和IP之间的对应关系，称为“记录”（record），根据使用场景，记录可以分成不同类型（type）")]),s._v(" "),t("p",[s._v("常见的DNS记录类型如下")]),s._v(" "),t("ul",[t("li",[s._v("A：地址记录（Address），返回的域名指向ip地址")]),s._v(" "),t("li",[s._v("NS:域名服务器记录（Name Service），返回保存下一级域名信息的服务器地址。该记录只能设置为域名，不能设置为IP地址")]),s._v(" "),t("li",[s._v("MX:邮件记录（Mail eXchange），返回接收电子邮件的服务器地址")]),s._v(" "),t("li",[s._v("CNAME:规范名称记录（Canonical Name）,返回另一个域名，既当前查询的域名是另一个域名的调整。（例如百度）")]),s._v(" "),t("li",[s._v("PTR:逆向查询记录（Pointer Record），只用于从IP地址查询域名")])]),s._v(" "),t("h3",{attrs:{id:"_3-1-cname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-cname"}},[s._v("#")]),s._v(" 3.1 CNAME")]),s._v(" "),t("p",[s._v("CNAME 记录主要用于域名的内部跳转，为服务器配置提供灵活性，用户感知不到。")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("dig www.baidu.com\n\n; <<>> DiG 9.8.3-P1 <<>> www.baidu.com\n...\n;; ANSWER SECTION:\nwww.baidu.com.\t\t600\tIN\tCNAME\twww.a.shifen.com.\nwww.a.shifen.com.\t600\tIN\tA\t14.215.177.39\nwww.a.shifen.com.\t600\tIN\tA\t14.215.177.38\n")])])]),t("p",[s._v("上面的结果显示，"),t("code",[s._v("www.baidu.com")]),s._v(" 的cname 记录指向的是"),t("code",[s._v("www.a.shifen.com")]),s._v(".也就是说用户查询"),t("code",[s._v("www.baidu.com")]),s._v(" 的时候，实际上返回的是"),t("code",[s._v("www.a.shifen.com")]),s._v(" 的ip地址。")]),s._v(" "),t("p",[t("strong",[s._v("好处")])]),s._v(" "),t("p",[s._v("变更服务器ip地址的时候，只要修改"),t("code",[s._v("www.a.shifen.com")]),s._v(" 这个域名就可以了，用户的"),t("code",[s._v("www.baidu.com")]),s._v("域名不用修改")]),s._v(" "),t("h2",{attrs:{id:"_4-其他dns-工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-其他dns-工具"}},[s._v("#")]),s._v(" 4.其他DNS 工具")]),s._v(" "),t("h3",{attrs:{id:"_4-1-host命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-host命令"}},[s._v("#")]),s._v(" 4.1 host命令")]),s._v(" "),t("p",[s._v("host命令可以看作dig命令的简化版本，返回当前请求域名的各种记录")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190824220258126.png",alt:"image-20190824220258126"}})]),s._v(" "),t("h3",{attrs:{id:"_4-2-nslookup命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-nslookup命令"}},[s._v("#")]),s._v(" 4.2 nslookup命令")]),s._v(" "),t("p",[s._v("nslookup命令用于互动式的查询域名记录")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190824220446036.png",alt:"image-20190824220446036"}})]),s._v(" "),t("p",[s._v("也可以直接过滤出cname")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190824221338613.png",alt:"image-20190824221338613"}})]),s._v(" "),t("h3",{attrs:{id:"_4-3-whois-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-whois-命令"}},[s._v("#")]),s._v(" 4.3 whois 命令")]),s._v(" "),t("p",[s._v("whois 命令用来查看域名的注册情况")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("whois github.com\n")])])]),t("h3",{attrs:{id:"关于上文出现的218-85-152-99是我本机设置的dns地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关于上文出现的218-85-152-99是我本机设置的dns地址"}},[s._v("#")]),s._v(" 关于上文出现的218.85.152.99是我本机设置的dns地址")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190824220945022.png",alt:"image-20190824220945022"}})]),s._v(" "),t("h2",{attrs:{id:"参考博客"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考博客"}},[s._v("#")]),s._v(" 参考博客")]),s._v(" "),t("p",[t("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/06/dns.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("DNS 原理入门"),t("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=e.exports}}]);