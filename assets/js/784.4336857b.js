(window.webpackJsonp=window.webpackJsonp||[]).push([[784],{1161:function(t,a,s){"use strict";s.r(a);var n=s(26),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"beautifulsoup入门"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#beautifulsoup入门"}},[t._v("#")]),t._v(" BeautifulSoup入门")]),t._v(" "),s("h2",{attrs:{id:"_1-简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-简介"}},[t._v("#")]),t._v(" 1. 简介")]),t._v(" "),s("p",[s("strong",[t._v("Beautiful Soup")]),t._v(" 是一个可以从 "),s("strong",[t._v("HTML")]),t._v(" 或 "),s("strong",[t._v("XML")]),t._v(" 文件中提取数据的 "),s("strong",[t._v("Python")]),t._v(" 库.它能够通过你喜欢的转换器实现惯用的文档导航,查找,修改文档的方式."),s("strong",[t._v("Beautiful Soup")]),t._v(" 会帮你节省数小时甚至数天的工作时间.")]),t._v(" "),s("h2",{attrs:{id:"_2-简单用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-简单用法"}},[t._v("#")]),t._v(" 2. 简单用法")]),t._v(" "),s("p",[t._v("将一段文档传入 "),s("strong",[t._v("BeautifulSoup")]),t._v(" 的构造方法,就能得到一个文档的对象, 可以传入一段字符串或一个文件句柄.")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" bs4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" BeautifulSoup\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" soup "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" BeautifulSoup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<html><body><p>data</p></body></html>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" soup\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" soup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'p'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("ol",[s("li",[s("p",[t._v("首先传入一个 "),s("strong",[t._v("html")]),t._v(" 文档，"),s("code",[t._v("soup")]),t._v(" 是获得文档的对象。")])]),t._v(" "),s("li",[s("p",[t._v("然后,文档被转换成 "),s("strong",[t._v("Unicode")]),t._v(" ,并且 "),s("strong",[t._v("HTML")]),t._v(" 的实例都被转换成 "),s("strong",[t._v("Unicode")]),t._v(" 编码。")])]),t._v(" "),s("li",[s("p",[t._v("然后,"),s("strong",[t._v("Beautiful Soup")]),t._v(" 选择最合适的解析器来解析这段文档,")]),t._v(" "),s("p",[t._v("如果手动指定解析器那么 "),s("strong",[t._v("Beautiful Soup")]),t._v(" 会选择指定的解析器来解析文档。但是一般最好手动指定解析器，")])])]),t._v(" "),s("ul",[s("li",[t._v("要解析的文档是什么类型: 目前支持, "),s("strong",[t._v("html, xml,")]),t._v(" 和 "),s("strong",[t._v("html5")])]),t._v(" "),s("li",[t._v("指定使用哪种解析器: 目前支持, "),s("strong",[t._v("lxml, html5lib,")]),t._v(" 和 "),s("strong",[t._v("html.parser")])])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" bs4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" BeautifulSoup\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" requests\n\nhtml "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" requests"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("‘http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("//")]),t._v("www"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jianshu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("’"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content  \nsoup "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" BeautifulSoup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'html.parser'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" from_encoding"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nresult "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" soup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"_3-对象种类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-对象种类"}},[t._v("#")]),t._v(" 3. 对象种类")]),t._v(" "),s("p",[s("strong",[t._v("Beautiful Soup")]),t._v(" 将复杂 "),s("strong",[t._v("HTML")]),t._v(" 文档转换成一个复杂的树形结构,每个节点都是 "),s("strong",[t._v("Python")]),t._v(" 对象,所有对象可以归纳为 4 种: "),s("code",[t._v("Tag , NavigableString , BeautifulSoup , Comment .")])]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("Tag")]),t._v("：通俗点讲就是 "),s("strong",[t._v("HTML")]),t._v(" 中的一个个标签，像上面的 "),s("code",[t._v("div，p")]),t._v("。每个 "),s("code",[t._v("Tag")]),t._v(" 有两个重要的属性 "),s("code",[t._v("name")]),t._v(" 和 "),s("code",[t._v("attrs，name")]),t._v(" 指标签的名字或者 "),s("code",[t._v("tag")]),t._v(" 本身的 "),s("code",[t._v("name，attrs")]),t._v(" 通常指一个标签的 "),s("code",[t._v("class")]),t._v("。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("NavigableString")]),t._v("：获取标签内部的文字，如，"),s("code",[t._v("soup.p.string")]),t._v("。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("BeautifulSoup")]),t._v("：表示一个文档的全部内容。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("Comment：Comment")]),t._v(" 对象是一个特殊类型的 "),s("code",[t._v("NavigableString")]),t._v(" 对象，其输出的内容不包括注释符号.")])])]),t._v(" "),s("h2",{attrs:{id:"_4-示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-示例"}},[t._v("#")]),t._v(" 4. 示例")]),t._v(" "),s("p",[t._v("如下示例，"),s("strong",[t._v("Beautiful Soup")]),t._v(" 的常见用法")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" sys  \n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("reload")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \nsys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setdefaultencoding"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" bs4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" BeautifulSoup\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" requests\n\n\nhtml_doc "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n<head>\n      <meta charset="utf-8">\n      <meta http-equiv="X-UA-Compatible" content="IE=Edge">\n    <title>首页 - 简书</title>\n</head>\n\n<body class="output fluid zh cn win reader-day-mode reader-font2 " data-js-module="recommendation" data-locale="zh-CN">\n\n<ul class="article-list thumbnails">\n\n  <li class=have-img>\n      <a class="wrap-img" href="/p/49c4728c3ab2"><img src="http://upload-images.jianshu.io/upload_images/2442470-745c6471c6f8258c.jpg?imageMogr2/auto-orient/strip%7CimageView2/1/w/300/h/300" alt="300" /></a>\n    <div>\n      <p class="list-top">\n        <a class="author-name blue-link" target="_blank" href="/users/0af6b163b687">阿随向前冲</a>\n        <em>·</em>\n        <span class="time" data-shared-at="2016-07-27T07:03:54+08:00"></span>\n      </p>\n      <h4 class="title"><a target="_blank" href="/p/49c4728c3ab2"> 只装了这六款软件，工作就高效到有时间逛某宝刷某圈</a></h4>\n      <div class="list-footer">\n        <a target="_blank" href="/p/49c4728c3ab2">\n          阅读 1830\n</a>        <a target="_blank" href="/p/49c4728c3ab2#comments">\n           · 评论 35\n</a>        <span> · 喜欢 95</span>\n          <span> · 打赏 1</span>\n        \n      </div>\n    </div>\n  </li>\n</ul>\n\n</body>\n"""')]),t._v("\n\nsoup "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" BeautifulSoup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html_doc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'html.parser'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" from_encoding"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查找所有有关的节点")]),t._v("\ntags "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" soup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_all"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'li'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" class_"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"have-img"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" tag "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" tags"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        image "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        article_user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("p"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        article_user_url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("p"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'href'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("      \n        created "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("p"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("span"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data-shared-at'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("        \n        article_url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("h4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'href'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可以在查找的 tag 下继续使用 find_all()")]),t._v("\n        tag_span "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_all"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'span'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        likes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tag_span"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("strip"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_4-1-find-all"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-find-all"}},[t._v("#")]),t._v(" 4.1 find_all()")]),t._v(" "),s("p",[s("strong",[t._v("BeautifulSoup")]),t._v(" 主要用来遍历子节点及子节点的属性，通过点取属性的方式只能获得当前文档中的第一个 "),s("code",[t._v("tag")]),t._v("，例如，"),s("code",[t._v("soup.li")]),t._v("。如果想要得到所有的"),s("code",[t._v("<li>")]),t._v(" 标签,或是通过名字得到比一个 "),s("code",[t._v("tag")]),t._v(" 更多的内容的时候,就需要用到 "),s("code",[t._v("find_all()")]),t._v("，"),s("code",[t._v("find_all()")]),t._v(" 方法搜索当前 tag 的所有 tag 子节点,并判断是否符合过滤器的条件"),s("code",[t._v("find_all()")]),t._v(" 所接受的参数如下：")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("find_all")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" name "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" attrs "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" recursive "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" string "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("kwargs "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("ol",[s("li",[s("p",[t._v("按 "),s("code",[t._v("name")]),t._v(" 搜索: "),s("code",[t._v("name")]),t._v(" 参数可以查找所有名字为 "),s("code",[t._v("name")]),t._v(" 的 "),s("code",[t._v("tag")]),t._v(",字符串对象会被自动忽略掉:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v(" soup.find_all"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("按 "),s("code",[t._v("id")]),t._v(" 搜索: 如果包含一个名字为 "),s("code",[t._v("id")]),t._v(" 的参数,搜索时会把该参数当作指定名字 "),s("code",[t._v("tag")]),t._v(" 的属性来搜索:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v(" soup.find_all"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'link2'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("按 "),s("code",[t._v("attr")]),t._v(" 搜索：有些 "),s("code",[t._v("tag")]),t._v(" 属性在搜索不能使用,比如 "),s("strong",[t._v("HTML5")]),t._v(" 中的 "),s("code",[t._v("data-*")]),t._v(" 属性，但是可以通过 "),s("code",[t._v("find_all()")]),t._v(" 方法的 "),s("code",[t._v("attrs")]),t._v(" 参数定义一个字典参数来搜索包含特殊属性的 "),s("code",[t._v("tag")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v(" data_soup.find_all"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attrs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data-foo"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("按 "),s("code",[t._v("CSS")]),t._v(" 搜索: 按照 "),s("code",[t._v("CSS")]),t._v(" 类名搜索 "),s("code",[t._v("tag")]),t._v(" 的功能非常实用,但标识"),s("code",[t._v("CSS")]),t._v(" 类名的关键字 "),s("code",[t._v("class")]),t._v(" 在 "),s("strong",[t._v("Python")]),t._v(" 中是保留字,使用 "),s("code",[t._v("class")]),t._v(" 做参数会导致语法错误.从 "),s("strong",[t._v("Beautiful Soup")]),t._v(" 的 4.1.1 版本开始,可以通过 "),s("code",[t._v("class_")]),t._v(" 参数搜索有指定 "),s("code",[t._v("CSS")]),t._v(" 类名的 "),s("code",[t._v("tag")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-ruby extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ruby"}},[s("code",[t._v(" soup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_all"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'li'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" class_"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"have-img"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("string")]),t._v(" 参数：通过 "),s("code",[t._v("string")]),t._v(" 参数可以搜搜文档中的字符串内容.与 "),s("code",[t._v("name")]),t._v(" 参数的可选值一样, "),s("code",[t._v("string")]),t._v(" 参数接受 字符串 , 正则表达式 , 列表, "),s("code",[t._v("True")]),t._v(" 。 看例子:")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[t._v(" soup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("find_all")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Elsie"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("recursive")]),t._v(" 参数：调用 "),s("code",[t._v("tag")]),t._v(" 的 "),s("code",[t._v("find_all()")]),t._v(" 方法时,"),s("strong",[t._v("Beautiful Soup")]),t._v(" 会检索当前 "),s("code",[t._v("tag")]),t._v(" 的所有子孙节点,如果只想搜索 "),s("code",[t._v("tag")]),t._v(" 的直接子节点,可以使用参数 "),s("code",[t._v("recursive=False")]),t._v(" .")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v(" soup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("find_all")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"title"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" recursive"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("False")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("find_all()")]),t._v(" 几乎是 "),s("strong",[t._v("Beautiful Soup")]),t._v("中最常用的搜索方法,也可以使用其简写方法，以下代码等价：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("    soup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_all"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    soup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("h3",{attrs:{id:"_4-2-get-text"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-get-text"}},[t._v("#")]),t._v(" 4.2 get_text()")]),t._v(" "),s("p",[t._v("如果只想得到 "),s("code",[t._v("tag")]),t._v(" 中包含的文本内容,那么可以用 "),s("code",[t._v("get_text()")]),t._v(" 方法,这个方法获取到 "),s("code",[t._v("tag")]),t._v(" 中包含的所有文版内容包括子孙 "),s("code",[t._v("tag")]),t._v(" 中的内容,并将结果作为 "),s("code",[t._v("Unicode")]),t._v(" 字符串返回:")]),t._v(" "),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[t._v("    tag.p.a.get_"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("text")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"参考文章"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.jianshu.com/p/2b783f7914c6",target:"_blank",rel:"noopener noreferrer"}},[t._v("python：BeautifulSoup 模块使用指南"),s("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=e.exports}}]);